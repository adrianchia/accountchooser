/* Copyright 2012 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var a=null,f=window,h=document;function j(b,c){return b.href=c}
var k="replace",l="trim",n="createElement",o="setAttribute",p="documentElement",q="split",r="location",s="localStorage",t="isArray",u="slice",v="indexOf",w="param",x="length",y="prototype",z="clientWidth",A="document",B="body",C="call",D="clientHeight",E="",F="#",G="&",H="', ignored!",I="':",J="(^|;) ?",K="/",L="//",M=":443",N=":80",aa="; Path=/; expires=",O="=",ba="=([^;]*)(;|$)",ca="=; Path=/; expires=",P="?",da="Failed to clear from cookie: ",ea="Failed to clear from localStorage: ",fa="Failed to read from cookie: ",
ga="Failed to read from localStorage: ",ha="Failed to write to cookie: ",ia="Failed to write to localStorage: ",ja="Ignore unrecognized value for '",Q="MSIE",ka="POST",la="Parameter %%param%% cannot be an empty array.",R="Parameter %%param%% cannot be empty.",ma="Parameter %%param%% cannot be null.",na="Parameter %%param%% is not a function.",oa="Parameter %%param%% is not an array.",pa="Unrecognized CDS helper mode :",qa="Unrecognized config parameter '",ra="[object Array]",sa="[object Function]",
ta="a",ua="accountchooserpageurl",va="anytabheader",wa="apiversion",xa="callbackurl",ya="cdsclientcallbackurl",za="cdsemptyresponsehandler",Aa="cdshelpermode",Ba="cdsuiconfig",Ca="checkusernameformat",Da="companyname",Ea="complete",S="cookieName",Fa="developerkey",Ga="dropdownmenu",Ha="federatedsignupurl",Ia="forgoturl",Ja="form",Ka="function",La="gitclient",Ma="head",Na="hidden",Oa="homeurl",Pa="http:",Qa="https:",Ra="idpconfig",Sa="idps",Ta="input",Ua="json",Va="language",Wa="loaded",Xa="localStorage",
T="localStorageKey",Ya="localtabheader",Za="loginurl",$a="logouthandler",ab="logouturl",bb="mode",cb="name",U="object",db="opt_cookieName",eb="opt_localStorageKey || opt_cookieName",fb="parentClass",gb="post",hb="realm",ib="returntourl",V="script",jb="showaccountsmenu",kb="signupurl",lb="sitedisplaynameid",mb="siteemailid",nb="sitelogourl",ob="sitepasswordid",pb="sitephotourlid",qb="src",rb="storeaccount",sb="string",tb="supportlegacyusername",ub="text/javascript",vb="tryfederatedfirst",W="type",
wb="usecacheduserstatus",xb="usecds",yb="usecontextparam",zb="usefullpageredirect",Ab="usernameregex",Bb="userstatusurl",X="value",Cb="width",Y;f.accountchooser=f.accountchooser||{};f.cds=f.accountchooser;f.accountchooser.config=f.accountchooser.config||{};f.accountchooser.config.cdsHelperModes={LOGIN:"login",SIGNUP:"signup"};f.accountchooser.config.uiElementIds={email:"email",password:"password",name:"displayName",photo:"photoUrl"};f.accountchooser.config.loginUrl="account-login";
f.accountchooser.config.signupUrl="account-create";f.accountchooser.config.userStatusUrl="account-status";f.accountchooser.config.loginOkUrl=K;
f.accountchooser.config.setConfig=function(b){if(b)for(var c in b){var d=b[c];switch(c.toLowerCase()){case La:f.accountchooser.config.setWidgetGitClient_(d,c);break;case wa:f.accountchooser.config.setApiVersion_(d,c);break;case Fa:f.accountchooser.config.setDeveloperKey_(d,c);break;case tb:f.accountchooser.config.setSupportLegacyUsername_(d,c);break;case Ca:f.accountchooser.config.setCheckUsernameFormat_(d,c);break;case Ab:f.accountchooser.config.setUsernameRegex_(d,c);break;case yb:f.accountchooser.config.setUseContextParam_(d,
c);break;case Va:f.accountchooser.config.setLanguage_(d,c);break;case ib:case xa:f.accountchooser.config.setCallbackUrl_(d,c);break;case hb:f.accountchooser.config.setRealm_(d,c);break;case Da:f.accountchooser.config.setCompanyName_(d,c);break;case Cb:f.accountchooser.config.setWidgetWidth(d,c);break;case Za:f.accountchooser.config.setWidgetLoginUrl(d,c);break;case Bb:f.accountchooser.config.setWidgetUserStatusUrl(d,c);break;case kb:f.accountchooser.config.setWidgetSignupUrl(d,c);break;case Ha:f.accountchooser.config.setWidgetFederatedSignupUrl(d,
c);break;case Oa:f.accountchooser.config.setWidgetHomeUrl(d,c);break;case Ia:f.accountchooser.config.setWidgetForgotUrl(d,c);break;case ua:f.accountchooser.config.setWidgetAccountChooserPageUrl(d,c);break;case ab:f.accountchooser.config.setWidgetLogoutUrl(d,c);break;case $a:f.accountchooser.config.setWidgetLogoutHandler(d,c);break;case Sa:f.accountchooser.config.setWidgetIdps(d,c);break;case Ra:f.accountchooser.config.setWidgetIdpConfig(d,c);break;case Ya:f.accountchooser.config.setWidgetLocalTabHeader(d,
c);break;case va:f.accountchooser.config.setWidgetAnyTabHeader(d,c);break;case vb:f.accountchooser.config.setWidgetTryFederatedFirst(d,c);break;case wb:f.accountchooser.config.setWidgetUseCachedUserStatus(d,c);break;case jb:f.accountchooser.config.setWidgetShowAccountsMenu(d,c);break;case Ga:f.accountchooser.config.setWidgetDrowdownMenu(d,c);break;case nb:f.accountchooser.config.setWidgetSiteLogoUrl(d,c);break;case zb:f.accountchooser.config.setWidgetUseFullPageRedirect(d,c);break;case xb:f.accountchooser.config.setWidgetUseCds(d,
c);break;case za:f.accountchooser.config.setCdsEmptyResponseHandler(d,c);break;case ya:f.accountchooser.config.setCdsClientCallbackUrl(d,c);break;case Ba:f.accountchooser.config.setCdsUiConfig(d,c);break;case mb:f.accountchooser.config.setSiteEmailId(d,c);break;case ob:f.accountchooser.config.setSitePasswordId(d,c);break;case lb:f.accountchooser.config.setSiteDisplayNameId(d,c);break;case pb:f.accountchooser.config.setSitePhotoUrlId(d,c);break;case bb:f.accountchooser.config.setMode(d,c);break;case rb:f.accountchooser.config.setStoredAccount(d,
c);break;default:f.accountchooser.config.logUnrecognizedConfig_(c)}}};f.accountchooser.config.logUnrecognizedConfig_=function(b){f.accountchooser.util&&f.accountchooser.util.log&&f.accountchooser.util.log(qa+b+H)};f.accountchooser.config.setApiVersion_=function(b,c){f.gapi&&f.gapi.client?(f.accountchooser[w].notEmpty(b,c),f.accountchooser.config.apiVersion=b):f.googleapis?(f.accountchooser[w].notEmpty(b,c),f.accountchooser.config.apiVersion=b,f.googleapis.setVersions({identitytoolkit:b})):f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setDeveloperKey_=function(b,c){f.gapi&&f.gapi.client&&f.gapi.client.setApiKey?(f.accountchooser[w].notEmpty(b,c),f.gapi.client.setApiKey(b)):f.googleapis?(f.accountchooser[w].notEmpty(b,c),f.googleapis.setDeveloperKey(b)):f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setSupportLegacyUsername_=function(b){f.accountchooser.config.supportLegacyUsername=!!b};
f.accountchooser.config.setCheckUsernameFormat_=function(b){f.accountchooser.config.disableUsernameFormatCheck=!b};f.accountchooser.config.setUsernameRegex_=function(b){f.accountchooser.config.usernameRegex=b};f.accountchooser.config.setUseContextParam_=function(b){f.accountchooser.config.useContextParam=!!b};f.accountchooser.config.setLanguage_=function(b){f.accountchooser.config.language=b};
f.accountchooser.config.setCallbackUrl_=function(b,c){f.accountchooser[w].notEmpty(b,c);f.accountchooser.config.continueUrl=b};f.accountchooser.config.setRealm_=function(b){f.accountchooser.config.realm=b};f.accountchooser.config.setCompanyName_=function(b){f.accountchooser.labels&&f.accountchooser.config.replaceCompanyName_(f.accountchooser.labels,b)};
f.accountchooser.config.replaceCompanyName_=function(b,c){for(var d in b){var e=b[d];typeof e==sb?b[d]=e[k](/\%\%companyName\%\%/g,c):typeof e==U&&f.accountchooser.config.replaceCompanyName_(e,c)}};f.accountchooser.config.setWidgetGitClient_=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetWidth=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetLoginUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setWidgetSignupUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetFederatedSignupUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetUserStatusUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetForgotUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetHomeUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setWidgetIdps=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetIdpConfig=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetLocalTabHeader=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetAnyTabHeader=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetTryFederatedFirst=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setWidgetUseCachedUserStatus=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetShowAccountsMenu=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetLogoutUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetLogoutHandler=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setWidgetDrowdownMenu=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetSiteLogoUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetUseFullPageRedirect=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetUseCds=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setCdsEmptyResponseHandler=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setCdsClientCallbackUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setCdsUiConfig=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setSiteEmailId=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setSitePasswordId=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setSiteDisplayNameId=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setSitePhotoUrlId=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setMode=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setStoredAccount=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.setConfig=function(b){f.accountchooser.config.setConfig(b)};
f.accountchooser.util=f.accountchooser.util||{};f.accountchooser.util.log=function(b){try{f.console&&f.console.log&&f.console.log(b)}catch(c){}};f.accountchooser.util.uuidCounter_=(new Date).getTime();f.accountchooser.util.generateUuid=function(b){return b&&b.uuid?b.uuid:++f.accountchooser.util.uuidCounter_};
f.accountchooser.util.createForm_=function(b,c,d){if(!b)throw"The targetUrl cannot be null.";var e=f[A][n](Ja);e.method=gb;e.action=b;if(c)for(var g in c)b=f[A][n](Ta),b[o](W,Na),b[o](cb,g),c[g]===a||void 0===c[g]?b[o](X,E):b[o](X,c[g]),e.appendChild(b);d&&(e.target=d);f[A][B].appendChild(e);return e};f.accountchooser.util.postTo=function(b,c,d){b=f.accountchooser.util.createForm_(b,c,d);b.submit();f[A][B].removeChild(b)};
f.accountchooser.util.parseUrlParams=function(b){for(var c={},b=b[u](b[v](P)+1)[q](G),d=0;d<b[x];d++){var e=b[d][q](O);c[e[0]]=2==e[x]?decodeURIComponent(e[1]):void 0}return c};f.accountchooser.util.formRedirect=function(b,c){var d=b.substring(0,b[v](P)),e=f.accountchooser.util.parseUrlParams(b);f.accountchooser.util.postTo(d,e,c)};f.accountchooser.util.isBrowserSupported=function(){var b=999;-1!=navigator.appVersion[v](Q)&&(b=parseFloat(navigator.appVersion[q](Q)[1]));return 7<b};
f.accountchooser.util.makeUrl=function(b,c){var d=[],e;for(e in c)d.push(c[e]?e+O+c[e]:e);return b+P+d.join(G)};f.accountchooser.util.isArray=function(b){return"undefined"!==typeof jQuery?jQuery[t](b):Object[y].toString[C](b)===ra};f.accountchooser.util.isFunction=function(b){return"undefined"!==typeof jQuery?jQuery.isFunction(b):Object[y].toString[C](b)===sa};
f.accountchooser.util.indexOf=function(b,c){if(c){if("undefined"!==typeof jQuery)return jQuery.inArray(b,c);if(c[v])return c[v](b);for(var d=c[x],e=0;e<d;e++)if(e in c&&c[e]===b)return e}return-1};f.accountchooser.util.windowWidth=function(b){if("undefined"!==typeof jQuery)return jQuery(b).width();var c=0;b.innerWidth?c=b.innerWidth:b[A]&&b[A][p]&&b[A][p][z]?c=b[A][p][z]:b[A]&&(b[A][B]&&b[A][B][z])&&(c=b[A][B][z]);return c};
f.accountchooser.util.windowHeight=function(b){if("undefined"!==typeof jQuery)return jQuery(b).height();var c=0;b.innerHeight?c=b.innerHeight:b[A]&&b[A][p]&&b[A][p][D]?c=b[A][p][D]:b[A]&&(b[A][B]&&b[A][B][D])&&(c=b[A][B][D]);return c};f.accountchooser.util.trim=function(b){return"undefined"!==typeof jQuery?jQuery[l](b):b==a?E:String[y][l]?String[y][l][C](b):b[k](/^[\s\xa0]+/,E)[k](/[\s\xa0]+$/,E)};
f.accountchooser.util.extend=function(b,c,d){if(3>arguments[x])return c||{};if("undefined"!==typeof jQuery){var e=Array[y][u][C](arguments,b?0:1);return jQuery.extend.apply(jQuery,e)}if(typeof c!==U||c==a)c={};for(var e=2,g=arguments[x];e<g;e++){var i=arguments[e];if(i!=a)for(var m in i)void 0===i[m]||c===i[m]||(b&&typeof i[m]==U?(f.accountchooser.util[t](i[m])&&!f.accountchooser.util[t](c[m])&&(c[m]=[]),c[m]=f.accountchooser.util.extend(!0,c[m],i[m])):c[m]=i[m])}return c};
f.accountchooser.param={};f.accountchooser[w].notNull=function(b,c){(void 0===b||b===a)&&f.accountchooser[w].throwError_(ma,c)};f.accountchooser[w].notEmpty=function(b,c){b||f.accountchooser[w].throwError_(R,c)};f.accountchooser[w].notEmptyArray=function(b,c){b||f.accountchooser[w].throwError_(R,c);f.accountchooser.util[t](b)||f.accountchooser[w].throwError_(oa,c);b[x]||f.accountchooser[w].throwError_(la,c)};
f.accountchooser[w].notEmptyFunction=function(b,c){b||f.accountchooser[w].throwError_(R,c);f.accountchooser.util.isFunction(b)||f.accountchooser[w].throwError_(na,c)};f.accountchooser[w].throwError_=function(b,c){try{console&&console.trace&&console.trace()}catch(d){}throw b[k](/\%\%param\%\%/g,c?" '"+c+"'":E);};Function[y].inheritsFrom=function(b){f.accountchooser[w].notEmptyFunction(b,fb);this.prototype=new b;this[y].constructor=this;this[y].parentClass=b[y]};
f.accountchooser.util.Storage=function(b,c){f.accountchooser[w].notEmpty(b||c,eb);f.accountchooser.util.Storage.isLocalStorageSupported()||f.accountchooser[w].notEmpty(c,db);this.localStorageKey_=b;this.cookieName_=c};f.accountchooser.util.Storage.isLocalStorageSupported=function(){try{return Xa in f&&f[s]!==a}catch(b){return!1}};Y=f.accountchooser.util.Storage[y];
Y.read=function(){if(f.accountchooser.util.Storage.isLocalStorageSupported()&&this.isLocalStorageAllowed_())return this.readFromLocalStorage_();if(this.isCookieStorageAllowed_())return this.readFromCookie_()};Y.write=function(b){f.accountchooser.util.Storage.isLocalStorageSupported()&&this.isLocalStorageAllowed_()?this.writeToLocalStorage_(b):this.isCookieStorageAllowed_()&&this.writeToCookie_(b)};
Y.clear=function(){f.accountchooser.util.Storage.isLocalStorageSupported()&&this.isLocalStorageAllowed_()&&this.clearFromLocalStorage_();this.isCookieStorageAllowed_()&&this.clearFromCookie_()};Y.isLocalStorageAllowed_=function(){return!!this.localStorageKey_};Y.isCookieStorageAllowed_=function(){return!!this.cookieName_};
Y.readFromLocalStorage_=function(){f.accountchooser[w].notEmpty(this.localStorageKey_,T);try{var b=f[s].getItem(this.localStorageKey_);if(b)return JSON.parse(b)}catch(c){f.accountchooser.util.log(ga+c)}};Y.writeToLocalStorage_=function(b){f.accountchooser[w].notEmpty(this.localStorageKey_,T);try{var c=JSON.stringify(b);f[s].setItem(this.localStorageKey_,c)}catch(d){f.accountchooser.util.log(ia+d)}};
Y.clearFromLocalStorage_=function(){f.accountchooser[w].notEmpty(this.localStorageKey_,T);try{f[s].removeItem(this.localStorageKey_)}catch(b){f.accountchooser.util.log(ea+b)}};Y.readFromCookie_=function(){f.accountchooser[w].notEmpty(this.cookieName_,S);var b=h.cookie.match(J+this.cookieName_+ba);if(b&&(b=f.accountchooser.util[l](b[2])))try{return JSON.parse(unescape(b))}catch(c){f.accountchooser.util.log(fa+c)}};
Y.writeToCookie_=function(b){f.accountchooser[w].notEmpty(this.cookieName_,S);try{var c=new Date,d=c.getFullYear()+10,e=c.getMonth(),g=c.getDate(),i=new Date(d,e,g);h.cookie=this.cookieName_+O+escape(JSON.stringify(b))+aa+i.toGMTString()}catch(m){f.accountchooser.util.log(ha+m)}};Y.clearFromCookie_=function(){f.accountchooser[w].notEmpty(this.cookieName_,S);try{var b=new Date;b.setTime(b.getTime()-1);h.cookie=this.cookieName_+ca+b.toGMTString()}catch(c){f.accountchooser.util.log(da+c)}};
f.accountchooser.util.getCurrentScript=function(){if(h.currentScript)return h.currentScript;var b=h.getElementsByTagName(V);if(b[x])return b[b[x]-1]};f.accountchooser.util.getCurrentScriptContent=function(){var b=f.accountchooser.util.getCurrentScript();if(b)return b.innerHTML};f.accountchooser.util.getScriptByFilter_=function(b){if(b&&typeof b===Ka)for(var c=h.getElementsByTagName(V),d=0;d<c[x];d++)if(b(c[d]))return c[d]};
f.accountchooser.util.getScriptBySrc=function(b){return f.accountchooser.util.getScriptByFilter_(function(c){return b&&c.src&&b.test(c.src)})};f.accountchooser.util.getScriptContentBySrc=function(b){b=f.accountchooser.util.getScriptBySrc(b);return f.accountchooser.util.getCleanScriptContent(b)};f.accountchooser.util.getScriptById=function(b){return f.accountchooser.util.getScriptByFilter_(function(c){return c.id&&c.id===b&&c.src})};
f.accountchooser.util.getScriptContentById=function(b){b=f.accountchooser.util.getScriptById(b);return f.accountchooser.util.getCleanScriptContent(b)};f.accountchooser.util.CLEAN_SCRIPT_REPLACE_REGEX_=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g;f.accountchooser.util.getCleanScriptContent=function(b){return(b&&b.innerHTML||E)[k](f.accountchooser.util.CLEAN_SCRIPT_REPLACE_REGEX_,E)};f.accountchooser.loader=f.accountchooser.loader||{};f.accountchooser.loader.Loader=function(){};
f.accountchooser.loader.Loader[y].load=function(b,c,d,e){var g=this;this.load_(b,d,function(){c?g.load_(c,d,e):e()})};f.accountchooser.loader.Loader[y].load_=function(b,c,d){var e=h.getElementsByTagName(Ma)[0]||h[p],g=this.createResourceElement(b),i=!1;g.onload=g.onreadystatechange=function(){if(!i&&(!this.readyState||this.readyState===Wa||this.readyState===Ea))i=!0,g.onload=g.onreadystatechange=a,c&&c()};g.onerror=function(){e.removeChild(g);d&&d()};e.insertBefore(g,e.firstChild)};
f.accountchooser.loader.Loader[y].createResourceElement=function(){throw"Unimplemented! Child object must provide an implementation.";};f.accountchooser.loader.JsLoader=function(){};f.accountchooser.loader.JsLoader.inheritsFrom(f.accountchooser.loader.Loader);f.accountchooser.loader.JsLoader[y].createResourceElement=function(b){var c=h[n](V);c[o](W,ub);c[o](qb,b);return c};f.accountchooser.cdshelper=f.accountchooser.cdshelper||{};f.accountchooser.cdshelper.USER_STATUS_TIMEOUT_=1E3;
f.accountchooser.cdshelper.cdsClient_=a;f.accountchooser.cdshelper.uiElements_={email:a,password:a,name:a,photo:a};f.accountchooser.cdshelper.isLoginMode_=function(){return f.accountchooser.config.cdsHelperMode==f.accountchooser.config.cdsHelperModes.LOGIN};f.accountchooser.cdshelper.isSignupMode_=function(){return f.accountchooser.config.cdsHelperMode==f.accountchooser.config.cdsHelperModes.SIGNUP};f.accountchooser.cdshelper.storage_=new f.accountchooser.util.Storage("storedAccount","__STORED_ACCOUNT__");
f.accountchooser.cdshelper.getStoredAccount_=function(){var b=f.accountchooser.cdshelper.storage_.read();f.accountchooser.cdshelper.storage_.clear();return b};f.accountchooser.cdshelper.storeAccount_=function(b){f.accountchooser.cdshelper.storage_.write(b)};f.accountchooser.cdshelper.findUiElements_=function(){for(var b in f.accountchooser.cdshelper.uiElements_){var c=f.accountchooser.config.uiElementIds[b];c&&(f.accountchooser.cdshelper.uiElements_[b]=jQuery(F+c))}};
f.accountchooser.cdshelper.createAbsoluteUrl_=function(b,c){var d=c||f[r].href;if(!b)return d;var e=h[n](ta);j(e,d);var d=e.protocol,g=e.host,i=e.pathname;e.hostname[x]>e.host[x]&&(g=e.hostname);d==Pa&&g[u](-3)==N?g=g[u](0,-3):d==Qa&&g[u](-4)==M&&(g=g[u](0,-4));0<i[x]&&i[0]!=K&&(i=K+i);if(/https?:\/\//.test(b))return b;if(b[0]==K)return d+L+g+b;e=i[q](K);e[e[x]-1]=b;return d+L+g+e.join(K)};
f.accountchooser.cdshelper.matchUrl_=function(b,c,d){b=f.accountchooser.cdshelper.createAbsoluteUrl_(b,d);c=f.accountchooser.cdshelper.createAbsoluteUrl_(c,d);b=b[q](/\?|#/)[0];c=c[q](/\?|#/)[0];return b==c};f.accountchooser.cdshelper.isLoginPage_=function(){return f.accountchooser.cdshelper.matchUrl_(f[r].href,f.accountchooser.config.loginUrl)};f.accountchooser.cdshelper.isSignupPage_=function(){return f.accountchooser.cdshelper.matchUrl_(f[r].href,f.accountchooser.config.signupUrl)};
f.accountchooser.cdshelper.detectCdsHelperMode_=function(){if(!f.accountchooser.config.cdsHelperMode){var b=f.accountchooser.config.cdsHelperModes;if(f.accountchooser.cdshelper.isLoginPage_())f.accountchooser.config.cdsHelperMode=b.LOGIN;else if(f.accountchooser.cdshelper.isSignupPage_())f.accountchooser.config.cdsHelperMode=b.SIGNUP;else if(f[r].hash){b=f[r].hash;b[0]==F&&(b=b.substring(1));for(var b=b[q](G),c=0;c<b[x];c++){var d=b[c][q](O);if(2==d[x]&&d[0].toLowerCase()==Aa){f.accountchooser.config.setMode(d[1],
d[0]);break}}}}};f.accountchooser.cdshelper.checkUserStatus_=function(b,c){jQuery.ajax({type:ka,cache:!1,url:f.accountchooser.config.userStatusUrl,data:b,dataType:Ua,timeout:f.accountchooser.cdshelper.USER_STATUS_TIMEOUT_,success:function(b){c(b?b:{registered:!0})},error:function(){c({registered:!0})}})};
f.accountchooser.cdshelper.prefill_=function(b){f.accountchooser.cdshelper.uiElements_.email.val(b.email);f.accountchooser.cdshelper.uiElements_.name&&f.accountchooser.cdshelper.uiElements_.name.val(b.displayName);f.accountchooser.cdshelper.uiElements_.photo&&f.accountchooser.cdshelper.uiElements_.photo.val(b.photoUrl);f.accountchooser.cdshelper.uiElements_.password&&f.accountchooser.cdshelper.uiElements_.password.focus()};
f.accountchooser.cdshelper.redirect_=function(b,c){f.accountchooser.cdshelper.storeAccount_(b);switch(c){case f.accountchooser.config.cdsHelperModes.LOGIN:j(f[r],f.accountchooser.config.loginUrl);break;case f.accountchooser.config.cdsHelperModes.SIGNUP:j(f[r],f.accountchooser.config.signupUrl);break;default:f.accountchooser.util.log(pa+c)}};
f.accountchooser.cdshelper.selectCallback_=function(b){var c=b&&b.account;c&&c.email?f.accountchooser.cdshelper.checkUserStatus_(c,function(b){b.authUri?2048>b.authUri[x]?j(f[r],b.authUri):f.accountchooser.util.formRedirect(b.authUri):(b=b.registered?f.accountchooser.config.cdsHelperModes.LOGIN:f.accountchooser.config.cdsHelperModes.SIGNUP,b==f.accountchooser.config.cdsHelperMode?f.accountchooser.cdshelper.prefill_(c):f.accountchooser.cdshelper.redirect_(c,b))}):f.accountchooser.cdshelper.uiElements_.email.focus()};
f.accountchooser.cdshelper.defaultCallback_=function(){f.accountchooser.cdshelper.isLoginMode_()&&f.accountchooser.cdshelper.emptyCallback_()};
f.accountchooser.cdshelper.emptyCallback_=function(){f.accountchooser.config.storedAccount&&(f.accountchooser.storeAccountToCds(f.accountchooser.config.storedAccount),f.accountchooser.config.storedAccount=void 0);if(f.accountchooser.cdshelper.isLoginMode_()||f.accountchooser.cdshelper.isSignupMode_()){var b=f.accountchooser.cdshelper.getStoredAccount_();b?f.accountchooser.cdshelper.prefill_(b):f.accountchooser.cdshelper.isLoginMode_()&&f.accountchooser.selectAccountFromCds()}};
f.accountchooser.initCdsHelper=function(){var b=f.cds.CdsClient.init({callbacks:{select:f.accountchooser.cdshelper.selectCallback_,store:f.accountchooser.cdshelper.defaultCallback_,update:f.accountchooser.cdshelper.defaultCallback_,empty:f.accountchooser.cdshelper.emptyCallback_}});f.accountchooser.cdshelper.cdsClient_=b;f.accountchooser.cdshelper.findUiElements_();f.accountchooser.cdshelper.detectCdsHelperMode_()};
f.accountchooser.selectAccountFromCds=function(){f.accountchooser.cdshelper.cdsClient_.select(a,{ui:f.accountchooser.config.cdsUiConfig,language:f.accountchooser.config.language},!0)};f.accountchooser.storeAccountToCds=function(b){var c=f.accountchooser.cdshelper.createAbsoluteUrl_(f.accountchooser.config.loginOkUrl);f.accountchooser.cdshelper.cdsClient_.checkAccountExist(b,function(d,e){!e&&d?j(f[r],c):f.accountchooser.cdshelper.cdsClient_.store(b,a,{clientCallbackUrl:c,language:f.accountchooser.config.language})})};
f.accountchooser.updateAccountToCds=function(b){var c=f.accountchooser.cdshelper.createAbsoluteUrl_(f.accountchooser.config.loginOkUrl);f.accountchooser.cdshelper.cdsClient_.checkAccountExist(b,function(d,e){!e&&!d?j(f[r],c):f.accountchooser.cdshelper.cdsClient_.update(b,a,{clientCallbackUrl:c,language:f.accountchooser.config.language})})};f.accountchooser.config.setWidgetHomeUrl=function(b,c){f.accountchooser[w].notEmpty(b,c);f.accountchooser.config.loginOkUrl=b};
f.accountchooser.config.setWidgetLoginUrl=function(b,c){f.accountchooser[w].notEmpty(b,c);f.accountchooser.config.loginUrl=b};f.accountchooser.config.setWidgetSignupUrl=function(b){f.accountchooser.config.signupUrl=b};f.accountchooser.config.setWidgetUserStatusUrl=function(b){f.accountchooser.config.userStatusUrl=b};f.accountchooser.config.setCdsUiConfig=function(b){f.accountchooser.config.cdsUiConfig=b};
f.accountchooser.config.setSiteEmailId=function(b,c){f.accountchooser[w].notEmpty(b,c);f.accountchooser.config.uiElementIds.email=b};f.accountchooser.config.setSitePasswordId=function(b){f.accountchooser.config.uiElementIds.password=b};f.accountchooser.config.setSiteDisplayNameId=function(b){f.accountchooser.config.uiElementIds.name=b};f.accountchooser.config.setSitePhotoUrlId=function(b){f.accountchooser.config.uiElementIds.photo=b};
f.accountchooser.config.setMode=function(b,c){var d=f.accountchooser.config.cdsHelperModes,e;for(e in d)if(d[e]==(E+b).toLowerCase()){f.accountchooser.config.cdsHelperMode=d[e];return}f.accountchooser.util.log(ja+c+I+b)};f.accountchooser.config.setStoredAccount=function(b){f.accountchooser.config.storedAccount=b};f.accountchooser.cdshelper.initTemplate_='<script type="text/javascript">\n(function() {\nvar loader = new window.accountchooser.loader.JsLoader();\nfunction onAllLoaded() {\n  window.accountchooser.setConfig({\n    %%CONFIG%%\n  });\n  window.accountchooser.initCdsHelper();\n}\nfunction loadCdsClient() {\n  if (window.accountchooser.CdsClient) {\n    onAllLoaded();\n    return;\n  }\n  var url = "https://www.accountchooser.com/client.js";\n  loader.load(url, undefined, onAllLoaded);\n}\nfunction loadJQuery() {\n  if (window.jQuery) {\n    loadCdsClient();\n    return;\n  }\n  var url =\n    "https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js";\n  loader.load(url, undefined, loadCdsClient);\n}\nloadJQuery();\n})();\n<\/script>\n';
f.accountchooser.cdshelper.SCRIPT_ID_="ac_script";f.accountchooser.cdshelper.SCRIPT_SRC_REGEX_=/www\.accountchooser\.com\/client\.js/;var Z=f.accountchooser.util.getCurrentScriptContent();Z||(Z=f.accountchooser.util.getScriptContentById(f.accountchooser.cdshelper.SCRIPT_ID_));Z||(Z=f.accountchooser.util.getScriptContentBySrc(f.accountchooser.cdshelper.SCRIPT_SRC_REGEX_));var Db=f.accountchooser.cdshelper.initTemplate_[k](/\%\%CONFIG\%\%/,Z||E);h.write(Db);
