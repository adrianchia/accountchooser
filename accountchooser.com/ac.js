/* Copyright 2012 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var a=null,f=window,h=document;function j(b,c){return b.href=c}
var k="replace",l="sessionStorage",n="trim",o="createElement",p="setAttribute",q="documentElement",r="split",s="location",t="localStorage",u="isArray",v="slice",w="indexOf",x="param",y="length",z="prototype",A="clientWidth",B="document",C="body",D="call",E="clientHeight",F="",G="#",H="&",I="', ignored!",J="':",K="(^|;) ?",L="/",M="//",aa=":443",ba=":80",ca="; expires=",N="; path=/",O="=",da="=([^;]*)(;|$)",ea="=; expires=",P="?",fa="Failed to clear from DOM storage: ",ga="Failed to clear from cookie: ",
ha="Failed to read from DOM storage: ",ia="Failed to read from cookie: ",ja="Failed to write to DOM storage: ",ka="Failed to write to cookie: ",la="Ignore unrecognized value for '",Q="MSIE",ma="POST",na="Parameter %%param%% cannot be an empty array.",R="Parameter %%param%% cannot be empty.",oa="Parameter %%param%% cannot be null.",pa="Parameter %%param%% is not a function.",qa="Parameter %%param%% is not an array.",ra="Unrecognized CDS helper mode :",sa="Unrecognized config parameter '",ta="[object Array]",
ua="[object Function]",va="a",wa="accountchooserpageurl",xa="anytabheader",ya="apiversion",za="callbackurl",Aa="cdsclientcallbackurl",Ba="cdsemptyresponsehandler",Ca="cdshelpermode",Da="cdsuiconfig",Ea="checkusernameformat",Fa="companyname",Ga="complete",S="cookieName",Ha="developerkey",T="domStorageKey",Ia="dropdownmenu",Ja="federatedsignupurl",Ka="forgoturl",La="form",Ma="function",Na="gitclient",Oa="head",Pa="hidden",Qa="homeurl",Ra="http:",Sa="https:",Ta="idpconfig",Ua="idps",Va="input",Wa="json",
Xa="language",Ya="loaded",Za="localStorage",$a="localtabheader",ab="loginurl",bb="logouthandler",cb="logouturl",db="mode",eb="name",U="object",fb="opt_cookieName",gb="opt_domStorageKey || opt_cookieName",hb="parentClass",ib="post",jb="realm",kb="returntourl",V="script",lb="sessionStorage",mb="showaccountsmenu",nb="signupurl",ob="sitedisplaynameid",pb="siteemailid",qb="sitelogourl",rb="sitepasswordid",sb="sitephotourlid",tb="src",ub="storeaccount",vb="string",wb="supportlegacyusername",xb="text/javascript",
yb="tryfederatedfirst",W="type",zb="usecacheduserstatus",Ab="usecds",Bb="usecontextparam",Cb="usefullpageredirect",Db="usernameregex",Eb="userstatusurl",X="value",Fb="width",Y;f.accountchooser=f.accountchooser||{};f.cds=f.accountchooser;f.accountchooser.config=f.accountchooser.config||{};f.accountchooser.config.cdsHelperModes={LOGIN:"login",SIGNUP:"signup"};f.accountchooser.config.uiElementIds={email:"email",password:"password",name:"displayName",photo:"photoUrl"};
f.accountchooser.config.loginUrl="account-login";f.accountchooser.config.signupUrl="account-create";f.accountchooser.config.userStatusUrl="account-status";f.accountchooser.config.loginOkUrl=L;
f.accountchooser.config.setConfig=function(b){if(b)for(var c in b){var d=b[c];switch(c.toLowerCase()){case Na:f.accountchooser.config.setWidgetGitClient_(d,c);break;case ya:f.accountchooser.config.setApiVersion_(d,c);break;case Ha:f.accountchooser.config.setDeveloperKey_(d,c);break;case wb:f.accountchooser.config.setSupportLegacyUsername_(d,c);break;case Ea:f.accountchooser.config.setCheckUsernameFormat_(d,c);break;case Db:f.accountchooser.config.setUsernameRegex_(d,c);break;case Bb:f.accountchooser.config.setUseContextParam_(d,
c);break;case Xa:f.accountchooser.config.setLanguage_(d,c);break;case kb:case za:f.accountchooser.config.setCallbackUrl_(d,c);break;case jb:f.accountchooser.config.setRealm_(d,c);break;case Fa:f.accountchooser.config.setCompanyName_(d,c);break;case Fb:f.accountchooser.config.setWidgetWidth(d,c);break;case ab:f.accountchooser.config.setWidgetLoginUrl(d,c);break;case Eb:f.accountchooser.config.setWidgetUserStatusUrl(d,c);break;case nb:f.accountchooser.config.setWidgetSignupUrl(d,c);break;case Ja:f.accountchooser.config.setWidgetFederatedSignupUrl(d,
c);break;case Qa:f.accountchooser.config.setWidgetHomeUrl(d,c);break;case Ka:f.accountchooser.config.setWidgetForgotUrl(d,c);break;case wa:f.accountchooser.config.setWidgetAccountChooserPageUrl(d,c);break;case cb:f.accountchooser.config.setWidgetLogoutUrl(d,c);break;case bb:f.accountchooser.config.setWidgetLogoutHandler(d,c);break;case Ua:f.accountchooser.config.setWidgetIdps(d,c);break;case Ta:f.accountchooser.config.setWidgetIdpConfig(d,c);break;case $a:f.accountchooser.config.setWidgetLocalTabHeader(d,
c);break;case xa:f.accountchooser.config.setWidgetAnyTabHeader(d,c);break;case yb:f.accountchooser.config.setWidgetTryFederatedFirst(d,c);break;case zb:f.accountchooser.config.setWidgetUseCachedUserStatus(d,c);break;case mb:f.accountchooser.config.setWidgetShowAccountsMenu(d,c);break;case Ia:f.accountchooser.config.setWidgetDrowdownMenu(d,c);break;case qb:f.accountchooser.config.setWidgetSiteLogoUrl(d,c);break;case Cb:f.accountchooser.config.setWidgetUseFullPageRedirect(d,c);break;case Ab:f.accountchooser.config.setWidgetUseCds(d,
c);break;case Ba:f.accountchooser.config.setCdsEmptyResponseHandler(d,c);break;case Aa:f.accountchooser.config.setCdsClientCallbackUrl(d,c);break;case Da:f.accountchooser.config.setCdsUiConfig(d,c);break;case pb:f.accountchooser.config.setSiteEmailId(d,c);break;case rb:f.accountchooser.config.setSitePasswordId(d,c);break;case ob:f.accountchooser.config.setSiteDisplayNameId(d,c);break;case sb:f.accountchooser.config.setSitePhotoUrlId(d,c);break;case db:f.accountchooser.config.setMode(d,c);break;case ub:f.accountchooser.config.setStoredAccount(d,
c);break;default:f.accountchooser.config.logUnrecognizedConfig_(c)}}};f.accountchooser.config.logUnrecognizedConfig_=function(b){f.accountchooser.util&&f.accountchooser.util.log&&f.accountchooser.util.log(sa+b+I)};f.accountchooser.config.setApiVersion_=function(b,c){f.gapi&&f.gapi.client?(f.accountchooser[x].notEmpty(b,c),f.accountchooser.config.apiVersion=b):f.googleapis?(f.accountchooser[x].notEmpty(b,c),f.accountchooser.config.apiVersion=b,f.googleapis.setVersions({identitytoolkit:b})):f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setDeveloperKey_=function(b,c){f.gapi&&f.gapi.client&&f.gapi.client.setApiKey?(f.accountchooser[x].notEmpty(b,c),f.gapi.client.setApiKey(b)):f.googleapis?(f.accountchooser[x].notEmpty(b,c),f.googleapis.setDeveloperKey(b)):f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setSupportLegacyUsername_=function(b){f.accountchooser.config.supportLegacyUsername=!!b};
f.accountchooser.config.setCheckUsernameFormat_=function(b){f.accountchooser.config.disableUsernameFormatCheck=!b};f.accountchooser.config.setUsernameRegex_=function(b){f.accountchooser.config.usernameRegex=b};f.accountchooser.config.setUseContextParam_=function(b){f.accountchooser.config.useContextParam=!!b};f.accountchooser.config.setLanguage_=function(b){f.accountchooser.config.language=b};
f.accountchooser.config.setCallbackUrl_=function(b,c){f.accountchooser[x].notEmpty(b,c);f.accountchooser.config.continueUrl=b};f.accountchooser.config.setRealm_=function(b){f.accountchooser.config.realm=b};f.accountchooser.config.setCompanyName_=function(b){f.accountchooser.labels&&f.accountchooser.config.replaceCompanyName_(f.accountchooser.labels,b)};
f.accountchooser.config.replaceCompanyName_=function(b,c){for(var d in b){var e=b[d];typeof e==vb?b[d]=e[k](/\%\%companyName\%\%/g,c):typeof e==U&&f.accountchooser.config.replaceCompanyName_(e,c)}};f.accountchooser.config.setWidgetGitClient_=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetWidth=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetLoginUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setWidgetSignupUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetFederatedSignupUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetUserStatusUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetForgotUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetHomeUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setWidgetIdps=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetIdpConfig=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetLocalTabHeader=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetAnyTabHeader=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetTryFederatedFirst=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setWidgetUseCachedUserStatus=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetShowAccountsMenu=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetLogoutUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetLogoutHandler=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setWidgetDrowdownMenu=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetSiteLogoUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetUseFullPageRedirect=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setWidgetUseCds=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setCdsEmptyResponseHandler=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setCdsClientCallbackUrl=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setCdsUiConfig=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setSiteEmailId=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setSitePasswordId=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};
f.accountchooser.config.setSiteDisplayNameId=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setSitePhotoUrlId=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setMode=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.config.setStoredAccount=function(b,c){f.accountchooser.config.logUnrecognizedConfig_(c)};f.accountchooser.setConfig=function(b){f.accountchooser.config.setConfig(b)};
f.accountchooser.util=f.accountchooser.util||{};f.accountchooser.util.log=function(b){try{f.console&&f.console.log&&f.console.log(b)}catch(c){}};f.accountchooser.util.uuidCounter_=(new Date).getTime();f.accountchooser.util.generateUuid=function(b){return b&&b.uuid?b.uuid:++f.accountchooser.util.uuidCounter_};
f.accountchooser.util.createForm_=function(b,c,d){if(!b)throw"The targetUrl cannot be null.";var e=f[B][o](La);e.method=ib;e.action=b;if(c)for(var g in c)b=f[B][o](Va),b[p](W,Pa),b[p](eb,g),c[g]===a||void 0===c[g]?b[p](X,F):b[p](X,c[g]),e.appendChild(b);d&&(e.target=d);f[B][C].appendChild(e);return e};f.accountchooser.util.postTo=function(b,c,d){b=f.accountchooser.util.createForm_(b,c,d);b.submit();f[B][C].removeChild(b)};
f.accountchooser.util.parseUrlParams=function(b){for(var c={},b=b[v](b[w](P)+1)[r](H),d=0;d<b[y];d++){var e=b[d][r](O);c[e[0]]=2==e[y]?decodeURIComponent(e[1]):void 0}return c};f.accountchooser.util.formRedirect=function(b,c){var d=b.substring(0,b[w](P)),e=f.accountchooser.util.parseUrlParams(b);f.accountchooser.util.postTo(d,e,c)};f.accountchooser.util.isBrowserSupported=function(){var b=999;-1!=navigator.appVersion[w](Q)&&(b=parseFloat(navigator.appVersion[r](Q)[1]));return 7<b};
f.accountchooser.util.makeUrl=function(b,c){var d=[],e;for(e in c)d.push(c[e]?e+O+c[e]:e);return b+P+d.join(H)};f.accountchooser.util.isArray=function(b){return"undefined"!==typeof jQuery?jQuery[u](b):Object[z].toString[D](b)===ta};f.accountchooser.util.isFunction=function(b){return"undefined"!==typeof jQuery?jQuery.isFunction(b):Object[z].toString[D](b)===ua};
f.accountchooser.util.indexOf=function(b,c){if(c){if("undefined"!==typeof jQuery)return jQuery.inArray(b,c);if(c[w])return c[w](b);for(var d=c[y],e=0;e<d;e++)if(e in c&&c[e]===b)return e}return-1};f.accountchooser.util.windowWidth=function(b){if("undefined"!==typeof jQuery)return jQuery(b).width();var c=0;b.innerWidth?c=b.innerWidth:b[B]&&b[B][q]&&b[B][q][A]?c=b[B][q][A]:b[B]&&(b[B][C]&&b[B][C][A])&&(c=b[B][C][A]);return c};
f.accountchooser.util.windowHeight=function(b){if("undefined"!==typeof jQuery)return jQuery(b).height();var c=0;b.innerHeight?c=b.innerHeight:b[B]&&b[B][q]&&b[B][q][E]?c=b[B][q][E]:b[B]&&(b[B][C]&&b[B][C][E])&&(c=b[B][C][E]);return c};f.accountchooser.util.trim=function(b){return"undefined"!==typeof jQuery?jQuery[n](b):b==a?F:String[z][n]?String[z][n][D](b):b[k](/^[\s\xa0]+/,F)[k](/[\s\xa0]+$/,F)};
f.accountchooser.util.extend=function(b,c,d){if(3>arguments[y])return c||{};if("undefined"!==typeof jQuery){var e=Array[z][v][D](arguments,b?0:1);return jQuery.extend.apply(jQuery,e)}if(typeof c!==U||c==a)c={};for(var e=2,g=arguments[y];e<g;e++){var i=arguments[e];if(i!=a)for(var m in i)void 0===i[m]||c===i[m]||(b&&typeof i[m]==U?(f.accountchooser.util[u](i[m])&&!f.accountchooser.util[u](c[m])&&(c[m]=[]),c[m]=f.accountchooser.util.extend(!0,c[m],i[m])):c[m]=i[m])}return c};
f.accountchooser.param={};f.accountchooser[x].notNull=function(b,c){(void 0===b||b===a)&&f.accountchooser[x].throwError_(oa,c)};f.accountchooser[x].notEmpty=function(b,c){b||f.accountchooser[x].throwError_(R,c)};f.accountchooser[x].notEmptyArray=function(b,c){b||f.accountchooser[x].throwError_(R,c);f.accountchooser.util[u](b)||f.accountchooser[x].throwError_(qa,c);b[y]||f.accountchooser[x].throwError_(na,c)};
f.accountchooser[x].notEmptyFunction=function(b,c){b||f.accountchooser[x].throwError_(R,c);f.accountchooser.util.isFunction(b)||f.accountchooser[x].throwError_(pa,c)};f.accountchooser[x].throwError_=function(b,c){try{console&&console.trace&&console.trace()}catch(d){}throw b[k](/\%\%param\%\%/g,c?" '"+c+"'":F);};Function[z].inheritsFrom=function(b){f.accountchooser[x].notEmptyFunction(b,hb);this.prototype=new b;this[z].constructor=this;this[z].parentClass=b[z]};
f.accountchooser.util.Storage=function(b,c,d){f.accountchooser[x].notEmpty(b||c,gb);f.accountchooser.util.Storage.isDomStorageSupported(d)||f.accountchooser[x].notEmpty(c,fb);this.domStorageKey_=b;this.cookieName_=c;this.perSession_=d};f.accountchooser.util.Storage.isDomStorageSupported=function(b){try{return b?lb in f&&f[l]!=a:Za in f&&f[t]!=a}catch(c){return!1}};Y=f.accountchooser.util.Storage[z];
Y.read=function(){if(f.accountchooser.util.Storage.isDomStorageSupported(this.perSession_)&&this.isDomStorageAllowed_())return this.readFromDomStorage_();if(this.isCookieStorageAllowed_())return this.readFromCookie_()};Y.write=function(b){f.accountchooser.util.Storage.isDomStorageSupported(this.perSession_)&&this.isDomStorageAllowed_()?this.writeToDomStorage_(b):this.isCookieStorageAllowed_()&&this.writeToCookie_(b)};
Y.clear=function(){f.accountchooser.util.Storage.isDomStorageSupported(this.perSession_)&&this.isDomStorageAllowed_()&&this.clearFromDomStorage_();this.isCookieStorageAllowed_()&&this.clearFromCookie_()};Y.isDomStorageAllowed_=function(){return!!this.domStorageKey_};Y.isCookieStorageAllowed_=function(){return!!this.cookieName_};
Y.readFromDomStorage_=function(){f.accountchooser[x].notEmpty(this.domStorageKey_,T);var b=this.perSession_?f[l]:f[t];try{var c=b.getItem(this.domStorageKey_);if(c)return JSON.parse(c)}catch(d){f.accountchooser.util.log(ha+d)}};Y.writeToDomStorage_=function(b){f.accountchooser[x].notEmpty(this.domStorageKey_,T);var c=this.perSession_?f[l]:f[t];try{var d=JSON.stringify(b);c.setItem(this.domStorageKey_,d)}catch(e){f.accountchooser.util.log(ja+e)}};
Y.clearFromDomStorage_=function(){f.accountchooser[x].notEmpty(this.domStorageKey_,T);var b=this.perSession_?f[l]:f[t];try{b.removeItem(this.domStorageKey_)}catch(c){f.accountchooser.util.log(fa+c)}};Y.readFromCookie_=function(){f.accountchooser[x].notEmpty(this.cookieName_,S);var b=h.cookie.match(K+this.cookieName_+da);if(b&&(b=f.accountchooser.util[n](b[2])))try{return JSON.parse(unescape(b))}catch(c){f.accountchooser.util.log(ia+c)}};
Y.writeToCookie_=function(b){f.accountchooser[x].notEmpty(this.cookieName_,S);try{var c=new Date,d=c.getFullYear()+10,e=c.getMonth(),g=c.getDate(),i=new Date(d,e,g),m=this.perSession_?0:i.toGMTString();h.cookie=this.cookieName_+O+escape(JSON.stringify(b))+ca+m+N}catch(Gb){f.accountchooser.util.log(ka+Gb)}};
Y.clearFromCookie_=function(){f.accountchooser[x].notEmpty(this.cookieName_,S);try{var b=new Date;b.setTime(b.getTime()-1);h.cookie=this.cookieName_+ea+b.toGMTString()+N}catch(c){f.accountchooser.util.log(ga+c)}};f.accountchooser.util.getCurrentScript=function(){if(h.currentScript)return h.currentScript;var b=h.getElementsByTagName(V);if(b[y])return b[b[y]-1]};f.accountchooser.util.getCurrentScriptContent=function(){var b=f.accountchooser.util.getCurrentScript();return f.accountchooser.util.getCleanScriptContent(b)};
f.accountchooser.util.getScriptByFilter_=function(b){if(b&&typeof b===Ma)for(var c=h.getElementsByTagName(V),d=0;d<c[y];d++)if(b(c[d]))return c[d]};f.accountchooser.util.getScriptBySrc=function(b){return f.accountchooser.util.getScriptByFilter_(function(c){return b&&c.src&&b.test(c.src)})};f.accountchooser.util.getScriptContentBySrc=function(b){b=f.accountchooser.util.getScriptBySrc(b);return f.accountchooser.util.getCleanScriptContent(b)};
f.accountchooser.util.getScriptById=function(b){return f.accountchooser.util.getScriptByFilter_(function(c){return c.id&&c.id===b&&c.src})};f.accountchooser.util.getScriptContentById=function(b){b=f.accountchooser.util.getScriptById(b);return f.accountchooser.util.getCleanScriptContent(b)};f.accountchooser.util.CLEAN_SCRIPT_REPLACE_REGEX_=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g;
f.accountchooser.util.getCleanScriptContent=function(b){return(b&&b.innerHTML||F)[k](f.accountchooser.util.CLEAN_SCRIPT_REPLACE_REGEX_,F)};f.accountchooser.loader=f.accountchooser.loader||{};f.accountchooser.loader.Loader=function(){};f.accountchooser.loader.Loader[z].load=function(b,c,d,e){var g=this;this.load_(b,d,function(){c?g.load_(c,d,e):e()})};
f.accountchooser.loader.Loader[z].load_=function(b,c,d){var e=h.getElementsByTagName(Oa)[0]||h[q],g=this.createResourceElement(b),i=!1;g.onload=g.onreadystatechange=function(){if(!i&&(!this.readyState||this.readyState===Ya||this.readyState===Ga))i=!0,g.onload=g.onreadystatechange=a,c&&c()};g.onerror=function(){e.removeChild(g);d&&d()};e.insertBefore(g,e.firstChild)};
f.accountchooser.loader.Loader[z].createResourceElement=function(){throw"Unimplemented! Child object must provide an implementation.";};f.accountchooser.loader.JsLoader=function(){};f.accountchooser.loader.JsLoader.inheritsFrom(f.accountchooser.loader.Loader);f.accountchooser.loader.JsLoader[z].createResourceElement=function(b){var c=h[o](V);c[p](W,xb);c[p](tb,b);return c};f.accountchooser.cdshelper=f.accountchooser.cdshelper||{};f.accountchooser.cdshelper.USER_STATUS_TIMEOUT_=1E3;
f.accountchooser.cdshelper.cdsClient_=a;f.accountchooser.cdshelper.uiElements_={email:a,password:a,name:a,photo:a};f.accountchooser.cdshelper.isLoginMode_=function(){return f.accountchooser.config.cdsHelperMode==f.accountchooser.config.cdsHelperModes.LOGIN};f.accountchooser.cdshelper.isSignupMode_=function(){return f.accountchooser.config.cdsHelperMode==f.accountchooser.config.cdsHelperModes.SIGNUP};f.accountchooser.cdshelper.storage_=new f.accountchooser.util.Storage("storedAccount",a,!0);
f.accountchooser.cdshelper.getStoredAccount_=function(){var b=f.accountchooser.cdshelper.storage_.read();f.accountchooser.cdshelper.storage_.clear();return b};f.accountchooser.cdshelper.storeAccount_=function(b){f.accountchooser.cdshelper.storage_.write(b)};f.accountchooser.cdshelper.findUiElements_=function(){for(var b in f.accountchooser.cdshelper.uiElements_){var c=f.accountchooser.config.uiElementIds[b];c&&(f.accountchooser.cdshelper.uiElements_[b]=jQuery(G+c))}};
f.accountchooser.cdshelper.createAbsoluteUrl_=function(b,c){var d=c||f[s].href;if(!b)return d;var e=h[o](va);j(e,d);var d=e.protocol,g=e.host,i=e.pathname;e.hostname[y]>e.host[y]&&(g=e.hostname);d==Ra&&g[v](-3)==ba?g=g[v](0,-3):d==Sa&&g[v](-4)==aa&&(g=g[v](0,-4));0<i[y]&&i[0]!=L&&(i=L+i);if(/https?:\/\//.test(b))return b;if(b[0]==L)return d+M+g+b;e=i[r](L);e[e[y]-1]=b;return d+M+g+e.join(L)};
f.accountchooser.cdshelper.matchUrl_=function(b,c,d){b=f.accountchooser.cdshelper.createAbsoluteUrl_(b,d);c=f.accountchooser.cdshelper.createAbsoluteUrl_(c,d);b=b[r](/\?|#/)[0];c=c[r](/\?|#/)[0];return b==c};f.accountchooser.cdshelper.isLoginPage_=function(){return f.accountchooser.cdshelper.matchUrl_(f[s].href,f.accountchooser.config.loginUrl)};f.accountchooser.cdshelper.isSignupPage_=function(){return f.accountchooser.cdshelper.matchUrl_(f[s].href,f.accountchooser.config.signupUrl)};
f.accountchooser.cdshelper.detectCdsHelperMode_=function(){if(!f.accountchooser.config.cdsHelperMode){var b=f.accountchooser.config.cdsHelperModes;if(f.accountchooser.cdshelper.isLoginPage_())f.accountchooser.config.cdsHelperMode=b.LOGIN;else if(f.accountchooser.cdshelper.isSignupPage_())f.accountchooser.config.cdsHelperMode=b.SIGNUP;else if(f[s].hash){b=f[s].hash;b[0]==G&&(b=b.substring(1));for(var b=b[r](H),c=0;c<b[y];c++){var d=b[c][r](O);if(2==d[y]&&d[0].toLowerCase()==Ca){f.accountchooser.config.setMode(d[1],
d[0]);break}}}}};f.accountchooser.cdshelper.checkUserStatus_=function(b,c){jQuery.ajax({type:ma,cache:!1,url:f.accountchooser.config.userStatusUrl,data:b,dataType:Wa,timeout:f.accountchooser.cdshelper.USER_STATUS_TIMEOUT_,success:function(b){c(b?b:{registered:!0})},error:function(){c({registered:!0})}})};
f.accountchooser.cdshelper.prefill_=function(b){f.accountchooser.cdshelper.uiElements_.email.val(b.email);f.accountchooser.cdshelper.uiElements_.name&&f.accountchooser.cdshelper.uiElements_.name.val(b.displayName);f.accountchooser.cdshelper.uiElements_.photo&&f.accountchooser.cdshelper.uiElements_.photo.val(b.photoUrl);f.accountchooser.cdshelper.uiElements_.password&&f.accountchooser.cdshelper.uiElements_.password.focus()};
f.accountchooser.cdshelper.redirect_=function(b,c){f.accountchooser.cdshelper.storeAccount_(b);switch(c){case f.accountchooser.config.cdsHelperModes.LOGIN:j(f[s],f.accountchooser.config.loginUrl);break;case f.accountchooser.config.cdsHelperModes.SIGNUP:j(f[s],f.accountchooser.config.signupUrl);break;default:f.accountchooser.util.log(ra+c)}};
f.accountchooser.cdshelper.selectCallback_=function(b){var c=b&&b.account;c&&c.email?f.accountchooser.cdshelper.checkUserStatus_(c,function(b){b.authUri?2048>b.authUri[y]?j(f[s],b.authUri):f.accountchooser.util.formRedirect(b.authUri):(b=b.registered?f.accountchooser.config.cdsHelperModes.LOGIN:f.accountchooser.config.cdsHelperModes.SIGNUP,b==f.accountchooser.config.cdsHelperMode?f.accountchooser.cdshelper.prefill_(c):f.accountchooser.cdshelper.redirect_(c,b))}):f.accountchooser.cdshelper.uiElements_.email.focus()};
f.accountchooser.cdshelper.defaultCallback_=function(){f.accountchooser.cdshelper.isLoginMode_()&&f.accountchooser.cdshelper.emptyCallback_()};
f.accountchooser.cdshelper.emptyCallback_=function(){f.accountchooser.config.storedAccount&&(f.accountchooser.storeAccountToCds(f.accountchooser.config.storedAccount),f.accountchooser.config.storedAccount=void 0);if(f.accountchooser.cdshelper.isLoginMode_()||f.accountchooser.cdshelper.isSignupMode_()){var b=f.accountchooser.cdshelper.getStoredAccount_();b?f.accountchooser.cdshelper.prefill_(b):f.accountchooser.cdshelper.isLoginMode_()&&f.accountchooser.selectAccountFromCds()}};
f.accountchooser.initCdsHelper=function(){var b=f.cds.CdsClient.init({callbacks:{select:f.accountchooser.cdshelper.selectCallback_,store:f.accountchooser.cdshelper.defaultCallback_,update:f.accountchooser.cdshelper.defaultCallback_,empty:f.accountchooser.cdshelper.emptyCallback_}});f.accountchooser.cdshelper.cdsClient_=b;f.accountchooser.cdshelper.findUiElements_();f.accountchooser.cdshelper.detectCdsHelperMode_()};
f.accountchooser.selectAccountFromCds=function(){f.accountchooser.cdshelper.cdsClient_.checkCdsEmpty(function(b,c){!c&&!b?f.accountchooser.cdshelper.cdsClient_.select(a,{ui:f.accountchooser.config.cdsUiConfig,language:f.accountchooser.config.language}):f.accountchooser.cdshelper.selectCallback_()})};
f.accountchooser.storeAccountToCds=function(b){var c=f.accountchooser.cdshelper.createAbsoluteUrl_(f.accountchooser.config.loginOkUrl);f.accountchooser.cdshelper.cdsClient_.checkAccountExist(b,function(d,e){!e&&!d?f.accountchooser.cdshelper.cdsClient_.store(b,a,{clientCallbackUrl:c,language:f.accountchooser.config.language}):j(f[s],c)})};
f.accountchooser.updateAccountToCds=function(b){var c=f.accountchooser.cdshelper.createAbsoluteUrl_(f.accountchooser.config.loginOkUrl);f.accountchooser.cdshelper.cdsClient_.checkAccountExist(b,function(d,e){!e&&d?f.accountchooser.cdshelper.cdsClient_.update(b,a,{clientCallbackUrl:c,language:f.accountchooser.config.language}):j(f[s],c)})};f.accountchooser.config.setWidgetHomeUrl=function(b,c){f.accountchooser[x].notEmpty(b,c);f.accountchooser.config.loginOkUrl=b};
f.accountchooser.config.setWidgetLoginUrl=function(b,c){f.accountchooser[x].notEmpty(b,c);f.accountchooser.config.loginUrl=b};f.accountchooser.config.setWidgetSignupUrl=function(b){f.accountchooser.config.signupUrl=b};f.accountchooser.config.setWidgetUserStatusUrl=function(b){f.accountchooser.config.userStatusUrl=b};f.accountchooser.config.setCdsUiConfig=function(b){f.accountchooser.config.cdsUiConfig=b};
f.accountchooser.config.setSiteEmailId=function(b,c){f.accountchooser[x].notEmpty(b,c);f.accountchooser.config.uiElementIds.email=b};f.accountchooser.config.setSitePasswordId=function(b){f.accountchooser.config.uiElementIds.password=b};f.accountchooser.config.setSiteDisplayNameId=function(b){f.accountchooser.config.uiElementIds.name=b};f.accountchooser.config.setSitePhotoUrlId=function(b){f.accountchooser.config.uiElementIds.photo=b};
f.accountchooser.config.setMode=function(b,c){var d=f.accountchooser.config.cdsHelperModes,e;for(e in d)if(d[e]==String(b).toLowerCase()){f.accountchooser.config.cdsHelperMode=d[e];return}f.accountchooser.util.log(la+c+J+b)};f.accountchooser.config.setStoredAccount=function(b){f.accountchooser.config.storedAccount=b};f.accountchooser.cdshelper.initTemplate_='<script type="text/javascript">\n(function() {\nvar loader = new window.accountchooser.loader.JsLoader();\nfunction onAllLoaded() {\n  window.accountchooser.setConfig({\n    %%CONFIG%%\n  });\n  window.accountchooser.initCdsHelper();\n}\nfunction loadCdsClient() {\n  if (window.accountchooser.CdsClient) {\n    onAllLoaded();\n    return;\n  }\n  var url = "https://www.accountchooser.com/client.js";\n  loader.load(url, undefined, onAllLoaded);\n}\nfunction loadJQuery() {\n  if (window.jQuery) {\n    loadCdsClient();\n    return;\n  }\n  var url =\n    "https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js";\n  loader.load(url, undefined, loadCdsClient);\n}\nloadJQuery();\n})();\n<\/script>\n';
f.accountchooser.cdshelper.SCRIPT_ID_="ac_script";f.accountchooser.cdshelper.SCRIPT_SRC_REGEX_=/www\.accountchooser\.com\/client\.js/;var Z=f.accountchooser.util.getCurrentScriptContent();Z||(Z=f.accountchooser.util.getScriptContentById(f.accountchooser.cdshelper.SCRIPT_ID_));Z||(Z=f.accountchooser.util.getScriptContentBySrc(f.accountchooser.cdshelper.SCRIPT_SRC_REGEX_));var Hb=f.accountchooser.cdshelper.initTemplate_[k](/\%\%CONFIG\%\%/,Z||F);h.write(Hb);
