(function(){var a=void 0,g=!0,h=null,i=!1,k=window,m=document,n=JSON,o=jQuery,aa=navigator;function ba(b,c){return b.onload=c}function ca(b,c){return b.toJSON=c}function da(b,c){return b.onreadystatechange=c}
var p="origin",q="exec",r="replace",s="data",ea="extend",t="trim",u="createElement",v="setAttribute",fa="attachEvent",w="getTime",x="documentElement",y="toString",ga="toJSON",z="queue",A="setTimeout",B="split",C="inArray",D="location",E="localStorage",ha="removeItem",F="options",G="displayName",H="isArray",ia="postMessage",I="push",J="Request",K="stringify",L="indexOf",M="readyState",N="param",ja="name",ka="parse",O="length",P="language",Q="prototype",la="clientWidth",R="document",S="body",T="call",
ma="clientHeight",U="toLowerCase",W="",na=" from ",oa='", must be under domain "',pa='".',qa="\"]', not exist.",ra="\"]'.",sa="#",ta="&",ua="'",va="' found!",wa="' has't initialized yet.",xa="', uuid='",ya="'.",za="': no valid iframeUrl.",Aa="(^|;) ?",Ba="*",Ca="-9999px",Da=".",Ea="1px",Fa="2.0",X=":",Ga="; Path=/; expires=",Ha="<iframe />",Ia="=",Ja="=([^;]*)(;|$)",Ka="=; Path=/; expires=",La="?",Ma="@",Na="Caja process stoped due to timeout.",Oa="CallClient failed: cannot find client window.",Pa=
"Clear CDS browser config.",Qa="Error request format: ",Ra="Failed to clear from cookie: ",Sa="Failed to clear from localStorage: ",Ta="Failed to find callback for response: ",Ua="Failed to find widget with uuid '",Va="Failed to get client domain in URL hash.",Wa="Failed to init IDP iframe for '",Ya="Failed to parse request: ",Za="Failed to read from cookie: ",$a="Failed to read from localStorage: ",ab="Failed to write to cookie: ",bb="Failed to write to localStorage: ",cb="GET",db="Get CDS browser config: ",
eb="Guest code rendered successfully.",fb="Ignore expired JSON-RPC object: [",gb="Ignore invalid JSON-RPC object: [",hb='Illegal clientCallbackUrl "',ib="Illegal request: ",jb="Illegal state error: IDP domain '",kb="Invalid JSON-RPC object: not a JSON object.",lb="Invalid JSON-RPC request: 'jsonrpc' field should be '2.0'.",mb="Invalid value for 'options.emailMapIdp.[\"",nb="Invalid value for 'options.emailMapIdp[\"",ob="MSIE",pb="No RPC handler for '",qb="No content returned in the HTML file.",rb=
"Parameter %%param%% cannot be an empty array.",sb="Parameter %%param%% cannot be empty.",tb="Parameter %%param%% cannot be null.",ub="Parameter %%param%% is not a function.",vb="Parameter %%param%% is not an array.",wb="Read saved accounts from storage: ",xb="Received message: ",yb="Register handler for postMessage failed.",zb="Save accounts to storage: ",Ab="Send message: ",Bb="Set CDS browser config: ",Cb="Successfully parsing request: ",Db="Timeout when initializing Caja.",Eb="Timeout when loading caja.js.",
Fb="Timeout when loading raw HTML.",Gb="Unimplementated! Child object must provide an implementation.",Hb="Unrecognized request: ",Ib="Unsupported IDP '",Jb="Unsupported IDP domain '",Kb="[object Array]",Lb="[object Function]",Mb="]",Nb="_",Ob="absolute",Pb="account",Qb="body",Rb="cajole",Sb="callback",Tb="chooserAccounts",Ub="complete",Vb="cookieName",Wb="disabled",Xb="domain",Yb="en",Zb="form",$b="handler",ac="head",bc="height",cc="hidden",dc="href",ec="html",fc="http://",gc="https://",hc="https://ssl.gstatic.com/caja/",
Y="id",ic="idpConfig",jc="iframeUrl",kc="input",lc="jsUrl",mc="left",nc="link",oc="loaded",pc="localStorage",qc="localStorageKey",rc="manage",sc="message",tc="name",uc="object",vc="onmessage",wc="opt_cookieName",xc="opt_localStorageKey || opt_cookieName",yc="parentClass",zc="position",Ac="post",Bc="query",Cc="rel",Dc="request",Ec="requestId",Fc="rpcObject",Gc="sanitize",Hc="script",Ic="semaphore value decrease to ",Jc="serviceMeta",Kc="serviceMeta.name",Lc="serviceName",Mc="src",Nc="string",Oc="stylesheet",
Pc="targetWindow",Qc="text/css",Rc="text/html",Sc="text/javascript",Tc="timeout",Uc="timeoutCallback",Vc="type",Wc="value",Xc="width",Yc="window",Zc="window.notifyWidget: type='",Z;k.accountchooser=k.accountchooser||{};k.cds=k.accountchooser;k.accountchooser.util=k.accountchooser.util||{};k.accountchooser.util.log=function(b){try{k.console&&k.console.log&&k.console.log(b)}catch(c){}};k.accountchooser.util.uuidCounter_=(new Date)[w]();
k.accountchooser.util.generateUuid=function(b){return b&&b.uuid?b.uuid:++k.accountchooser.util.uuidCounter_};k.accountchooser.util.createForm_=function(b,c,d){if(!b)throw"The targetUrl cannot be null.";var e=k[R][u](Zb);e.method=Ac;e.action=b;if(c)for(var f in c)b=k[R][u](kc),b[v](Vc,cc),b[v](tc,f),c[f]===h||c[f]===a?b[v](Wc,W):b[v](Wc,c[f]),e.appendChild(b);d&&(e.target=d);k[R][S].appendChild(e);return e};
k.accountchooser.util.postTo=function(b,c,d){b=k.accountchooser.util.createForm_(b,c,d);b.submit();k[R][S].removeChild(b)};k.accountchooser.util.parseUrlParams=function(b){for(var c={},b=b.slice(b[L](La)+1)[B](ta),d=0;d<b[O];d++){var e=b[d][B](Ia);c[e[0]]=2==e[O]?decodeURIComponent(e[1]):a}return c};k.accountchooser.util.formRedirect=function(b,c){var d=b.substring(0,b[L](La)),e=k.accountchooser.util.parseUrlParams(b);k.accountchooser.util.postTo(d,e,c)};
k.accountchooser.util.isBrowserSupported=function(){var b=999;-1!=aa.appVersion[L](ob)&&(b=parseFloat(aa.appVersion[B](ob)[1]));return 7<b};k.accountchooser.util.makeUrl=function(b,c){var d=[],e;for(e in c)d[I](c[e]?e+Ia+c[e]:e);return b+La+d.join(ta)};k.accountchooser.util.isArray=function(b){return"undefined"!==typeof o?o[H](b):Object[Q][y][T](b)===Kb};k.accountchooser.util.isFunction=function(b){return"undefined"!==typeof o?o.isFunction(b):Object[Q][y][T](b)===Lb};
k.accountchooser.util.indexOf=function(b,c){if(c){if("undefined"!==typeof o)return o[C](b,c);if(c[L])return c[L](b);for(var d=c[O],e=0;e<d;e++)if(e in c&&c[e]===b)return e}return-1};k.accountchooser.util.windowWidth=function(b){if("undefined"!==typeof o)return o(b).width();var c=0;b.innerWidth?c=b.innerWidth:b[R]&&b[R][x]&&b[R][x][la]?c=b[R][x][la]:b[R]&&(b[R][S]&&b[R][S][la])&&(c=b[R][S][la]);return c};
k.accountchooser.util.windowHeight=function(b){if("undefined"!==typeof o)return o(b).height();var c=0;b.innerHeight?c=b.innerHeight:b[R]&&b[R][x]&&b[R][x][ma]?c=b[R][x][ma]:b[R]&&(b[R][S]&&b[R][S][ma])&&(c=b[R][S][ma]);return c};k.accountchooser.util.trim=function(b){return"undefined"!==typeof o?o[t](b):b==h?W:String[Q][t]?String[Q][t][T](b):b[r](/^[\s\xa0]+/,W)[r](/[\s\xa0]+$/,W)};
k.accountchooser.util.extend=function(b,c,d){if(3>arguments[O])return c||{};if("undefined"!==typeof o){var e=Array[Q].slice[T](arguments,b?0:1);return o[ea].apply(o,e)}if(typeof c!==uc||c==h)c={};for(var e=2,f=arguments[O];e<f;e++){var j=arguments[e];if(j!=h)for(var l in j)j[l]===a||c===j[l]||(b&&typeof j[l]==uc?(k.accountchooser.util[H](j[l])&&!k.accountchooser.util[H](c[l])&&(c[l]=[]),c[l]=k.accountchooser.util[ea](g,c[l],j[l])):c[l]=j[l])}return c};k.accountchooser.param={};
k.accountchooser[N].notNull=function(b,c){(b===a||b===h)&&k.accountchooser[N].throwError_(tb,c)};k.accountchooser[N].notEmpty=function(b,c){b||k.accountchooser[N].throwError_(sb,c)};k.accountchooser[N].notEmptyArray=function(b,c){b||k.accountchooser[N].throwError_(sb,c);k.accountchooser.util[H](b)||k.accountchooser[N].throwError_(vb,c);b[O]||k.accountchooser[N].throwError_(rb,c)};
k.accountchooser[N].notEmptyFunction=function(b,c){b||k.accountchooser[N].throwError_(sb,c);k.accountchooser.util.isFunction(b)||k.accountchooser[N].throwError_(ub,c)};k.accountchooser[N].throwError_=function(b,c){try{console&&console.trace&&console.trace()}catch(d){}throw b[r](/\%\%param\%\%/g,c?" '"+c+ua:W);};Function[Q].inheritsFrom=function(b){k.accountchooser[N].notEmptyFunction(b,yc);this.prototype=new b;this[Q].constructor=this;this[Q].parentClass=b[Q]};
k.accountchooser.util.VALID_EMAIL_REGEX_=/^\w+(\.\w+)*@([a-z0-9]([-a-z0-9]*[a-z0-9])?\.)+[a-z0-9]+$/i;k.accountchooser.util.VALID_DOMAIN_REGEX_=/^([a-z0-9]([-a-z0-9]*[a-z0-9])?\.)+[a-z0-9]+$/i;k.accountchooser.util.isValidEmail=function(b){return b&&h!=k.accountchooser.util.VALID_EMAIL_REGEX_[q](b)};k.accountchooser.util.isValidDomain=function(b){return b&&h!=k.accountchooser.util.VALID_DOMAIN_REGEX_[q](b)};k.accountchooser.util.getEmailDomain=function(b){if((b=k.accountchooser.util[t](b))&&k.accountchooser.util.isValidEmail(b))return b[B](Ma)[1][U]()};
k.accountchooser.util.getEmailUsername=function(b){if((b=k.accountchooser.util[t](b))&&k.accountchooser.util.isValidEmail(b))return b[B](Ma)[0][U]()};k.accountchooser.util.isDomainInNascar=function(b){if(b){var c=k.accountchooser.config.idps,d;for(d in c){var e=c[d];if(e&&e.domain==b)return d}}};k.accountchooser.util.USERNAME_REGEX=/^\w+(\.\w+)*$/;
k.accountchooser.util.isValidUsername=function(b){return k.accountchooser.config?k.accountchooser.config.disableUsernameFormatCheck?!!b:k.accountchooser.config.usernameRegex?!!b&&h!=k.accountchooser.config.usernameRegex[q](b):!!b&&h!=k.accountchooser.util.USERNAME_REGEX[q](b):!!b&&h!=k.accountchooser.util.USERNAME_REGEX[q](b)};k.accountchooser.util.DOMAIN_REGEX_=/:\/\/(.[^\/?]+)/;k.accountchooser.util.VALID_URL_DOMAIN_REGEX_=/^([a-z0-9]([-a-z0-9]*[a-z0-9])?\.)+[a-z0-9]+(\:\d+)?$/i;
k.accountchooser.util.getDomainFromUrl=function(b){try{return b.match(k.accountchooser.util.DOMAIN_REGEX_)[1]}catch(c){}};k.accountchooser.util.isValidUrlDomain=function(b){return b?k.accountchooser.util.VALID_URL_DOMAIN_REGEX_.test(b):i};k.accountchooser.util.MOBILE_REGEX_=/iphone|ipad|ipod|android|blackberry|mini|iemobile|windows\sce|palm/i;k.accountchooser.util.isMobileAgent=function(b){return b&&k.accountchooser.util.MOBILE_REGEX_.test(b[U]())};
k.accountchooser.util.SUPPORTED_LANGUAGE_=[Yb,"en_gb","fr","it","de","es","zh_cn","zh_tw","ja","ko","nl","pl","pt","ru","th","tr","bg","ca","hr","cs","da","fil","fi","el","hi","hu",Y,"lv","lt","no","pt_pt","ro","sr","sk","sl","sv","uk","vi"];
k.accountchooser.util.ALTERNATIVE_CODES_MAP_={en_us:Yb,zh:"zh_cn",zh_hans:"zh_cn",zh_hans_cn:"zh_cn",zh_hant:"zh_tw",zh_hant_tw:"zh_tw",nl_nl:"nl",fr_fr:"fr",de_de:"de",it_it:"it",ja_jp:"ja",ko_kr:"ko",pl_pl:"pl",pt_br:"pt",ru_ru:"ru",es_es:"es",th_th:"th",tr_tr:"tr",bg_bg:"bg",ca_es:"ca",hr_hr:"hr",cs_cz:"cs",da_dk:"da",fil_ph:"fil",tl:"fil",fi_fi:"fi",el_gr:"el",hi_in:"hi",hu_hu:"hu",id_id:Y,lv_lv:"lv",lt_lt:"lt",no_no:"no",nb:"no",nb_no:"no",ro_ro:"ro",sr_cyrl_rs:"sr",sk_sk:"sk",sl_si:"sl",sv_se:"sv",
uk_ua:"uk",vi_vn:"vi"};k.accountchooser.util.findLanguageCode=function(b){for(var b=b&&b[r](/-/g,Nb)[U](),c;b;){if(-1<o[C](b,k.accountchooser.util.SUPPORTED_LANGUAGE_)){c=b;break}else if(k.accountchooser.util.ALTERNATIVE_CODES_MAP_[b]){c=k.accountchooser.util.ALTERNATIVE_CODES_MAP_[b];break}b=b[B](Nb);b.pop();b=b.join(Nb)}return c};k.accountchooser.util.getNamespacedObjectByString=function(b){for(var c=b[B](Da),d=0,e=c[O],f=k;d<e;++d)f=0==d&&c[0]==Yc?k:f[c[d]],k.accountchooser[N].notNull(f,b);return f};
k.accountchooser.util.REGISTRY_KEY_PREFIX_="widget_";k.accountchooser.util.widgets_={};k.accountchooser.util.registerWidget=function(b,c){k.accountchooser.util.widgets_[k.accountchooser.util.REGISTRY_KEY_PREFIX_+b]=c};k.accountchooser.util.unregisterWidget=function(b){delete k.accountchooser.util.widgets_[k.accountchooser.util.REGISTRY_KEY_PREFIX_+b]};
k.accountchooser.util.getWidget_=function(b){var c;if(b){var d=k.accountchooser.util.REGISTRY_KEY_PREFIX_+b;c=k.accountchooser.util.widgets_[d]}else for(d in k.accountchooser.util.widgets_){c=k.accountchooser.util.widgets_[d];break}return c};k.accountchooser.util.notifyWidget=function(b,c,d){k.accountchooser.util.log(Zc+b+xa+d+ua);var e=k.accountchooser.util.getWidget_(d);if(e){var f=o[ea]({},c);k[A](function(){e.handleNotification(b,f)},200)}else k.accountchooser.util.log(Ua+d+ya)};
k.accountchooser.util.Storage=function(b,c){k.accountchooser[N].notEmpty(b||c,xc);k.accountchooser.util.Storage.isLocalStorageSupported()||k.accountchooser[N].notEmpty(c,wc);this.localStorageKey_=b;this.cookieName_=c};k.accountchooser.util.Storage.isLocalStorageSupported=function(){try{return pc in k&&k[E]!==h}catch(b){return i}};Z=k.accountchooser.util.Storage[Q];
Z.read=function(){if(k.accountchooser.util.Storage.isLocalStorageSupported()&&this.isLocalStorageAllowed_())return this.readFromLocalStorage_();if(this.isCookieStorageAllowed_())return this.readFromCookie_()};Z.write=function(b){k.accountchooser.util.Storage.isLocalStorageSupported()&&this.isLocalStorageAllowed_()?this.writeToLocalStorage_(b):this.isCookieStorageAllowed_()&&this.writeToCookie_(b)};
Z.clear=function(){k.accountchooser.util.Storage.isLocalStorageSupported()&&this.isLocalStorageAllowed_()&&this.clearFromLocalStorage_();this.isCookieStorageAllowed_()&&this.clearFromCookie_()};Z.isLocalStorageAllowed_=function(){return!!this.localStorageKey_};Z.isCookieStorageAllowed_=function(){return!!this.cookieName_};
Z.readFromLocalStorage_=function(){k.accountchooser[N].notEmpty(this.localStorageKey_,qc);try{var b=k[E].getItem(this.localStorageKey_);if(b)return n[ka](b)}catch(c){k.accountchooser.util.log($a+c)}};Z.writeToLocalStorage_=function(b){k.accountchooser[N].notEmpty(this.localStorageKey_,qc);try{var c=n[K](b);k[E].setItem(this.localStorageKey_,c)}catch(d){k.accountchooser.util.log(bb+d)}};
Z.clearFromLocalStorage_=function(){k.accountchooser[N].notEmpty(this.localStorageKey_,qc);try{k[E][ha](this.localStorageKey_)}catch(b){k.accountchooser.util.log(Sa+b)}};Z.readFromCookie_=function(){k.accountchooser[N].notEmpty(this.cookieName_,Vb);var b=m.cookie.match(Aa+this.cookieName_+Ja);if(b&&(b=k.accountchooser.util[t](b[2])))try{return n[ka](unescape(b))}catch(c){k.accountchooser.util.log(Za+c)}};
Z.writeToCookie_=function(b){k.accountchooser[N].notEmpty(this.cookieName_,Vb);try{var c=new Date,d=c.getFullYear()+10,e=c.getMonth(),f=c.getDate(),j=new Date(d,e,f);m.cookie=this.cookieName_+Ia+escape(n[K](b))+Ga+j.toGMTString()}catch(l){k.accountchooser.util.log(ab+l)}};Z.clearFromCookie_=function(){k.accountchooser[N].notEmpty(this.cookieName_,Vb);try{var b=new Date;b.setTime(b[w]()-1);m.cookie=this.cookieName_+Ka+b.toGMTString()}catch(c){k.accountchooser.util.log(Ra+c)}};
k.accountchooser.util.accountstorage={};k.accountchooser.util.accountstorage.ACCOUNTS_=Tb;k.accountchooser.util.accountstorage.AC_COOKIE_NAME_="__goog__ac__";k.accountchooser.util.accountstorage.storage_=new k.accountchooser.util.Storage(k.accountchooser.util.accountstorage.ACCOUNTS_,k.accountchooser.util.accountstorage.AC_COOKIE_NAME_);k.accountchooser.util.accountstorage.read_=function(){var b=k.accountchooser.util.accountstorage.storage_.read();k.accountchooser.util.log(wb+n[K](b));return b};
k.accountchooser.util.accountstorage.write_=function(b){k.accountchooser.util.log(zb+n[K](b));k.accountchooser.util.accountstorage.storage_.write(b)};k.accountchooser.util.accountstorage.readAccounts=function(){var b=k.accountchooser.util.accountstorage.read_();if(!b||!k.accountchooser.util[H](b))b=[];return b};
k.accountchooser.util.accountstorage.addAccount=function(b){if(!b||!b.email)return i;for(var c=i,d=k.accountchooser.util.accountstorage.readAccounts(),e,f=0;f<d[O];f++)if(k.accountchooser.util.accountstorage.matchAccount_(d[f],b.email,b.providerId)){e=d[f];d.splice(f,1);c=g;break}if(e&&(!b[G]&&e[G]&&(b.displayName=e[G]),!b.photoUrl&&e.photoUrl))b.photoUrl=e.photoUrl;d.unshift(b);k.accountchooser.util.accountstorage.write_(d);return!c};
k.accountchooser.util.accountstorage.removeAccount=function(b){if(!b||!b.email)return i;for(var c=i,d=k.accountchooser.util.accountstorage.readAccounts(),e=0;e<d[O];e++)if(k.accountchooser.util.accountstorage.matchAccount_(d[e],b.email,b.providerId)){d.splice(e,1);c=g;break}k.accountchooser.util.accountstorage.write_(d);return c};k.accountchooser.util.accountstorage.clearAccounts=function(){k.accountchooser.util.accountstorage.storage_.clear()};
k.accountchooser.util.accountstorage.updateAccount=function(b,c,d){if(b)for(var e=k.accountchooser.util.accountstorage.readAccounts(),f=0;f<e[O];f++)if(k.accountchooser.util.accountstorage.matchAccount_(e[f],b,d)){c(e[f]);k.accountchooser.util.accountstorage.write_(e);break}};
k.accountchooser.util.accountstorage.refreshAccount=function(b){b&&b.email&&k.accountchooser.util.accountstorage.updateAccount(b.email,function(c){b[G]&&(c.displayName=b[G]);b.photoUrl&&(c.photoUrl=b.photoUrl);b.legacy!=a&&(c.legacy=b.legacy)})};
k.accountchooser.util.accountstorage.fetchAccount=function(b,c){if(b)for(var d=k.accountchooser.util.accountstorage.readAccounts(),e=0;e<d[O];e++)if(k.accountchooser.util.accountstorage.matchAccount_(d[e],b,c)){var f=d[e];d.splice(e,1);d.unshift(f);k.accountchooser.util.accountstorage.write_(d);return f}};k.accountchooser.util.accountstorage.matchAccount_=function(b,c,d){return b.email!=c?i:b.providerId&&d&&b.providerId==d||!b.providerId&&!d?g:i};k.accountchooser.updateSavedAccount=function(b){k.accountchooser.util.accountstorage.addAccount(b)};
k.accountchooser.removeSavedAccount=function(b){return k.accountchooser.util.accountstorage.removeAccount(b)};k.accountchooser.clearSavedAccounts=function(){k.accountchooser.util.accountstorage.clearAccounts()};k.accountchooser.util.accountstorage.ACCOUNTS_=Tb;k.accountchooser.util.accountstorage.AC_COOKIE_NAME_="__cds__ac__";k.accountchooser.util.accountstorage.storage_=new k.accountchooser.util.Storage(k.accountchooser.util.accountstorage.ACCOUNTS_,k.accountchooser.util.accountstorage.AC_COOKIE_NAME_);
k.accountchooser.util.accountstorage.readAccounts=function(b){var c=k.accountchooser.util.accountstorage.read_();if(!c||!k.accountchooser.util[H](c))c=[];if(!b)return c;if(b.withEmail)var d=function(b){return k.accountchooser.util.isValidEmail(b.email)},c=k.accountchooser.util.accountstorage.filter_(c,d);b.idpList&&0!=b.idpList[O]&&(d=function(c){return(c=c.providerId||k.accountchooser.util.getEmailDomain(c.email))?0<=k.accountchooser.util[L](c,b.idpList):i},c=k.accountchooser.util.accountstorage.filter_(c,
d));return c};k.accountchooser.util.accountstorage.filter_=function(b,c){for(var d=[],e=0;e<b[O];e++)c(b[e])&&d[I](b[e]);return d};k.accountchooser.util.browserconfig={};k.accountchooser.util.browserconfig.SETTINGS_KEY_="cdsSettings";k.accountchooser.util.browserconfig.COOKIE_NAME_="__cds__settings__";k.accountchooser.util.browserconfig.storage_=new k.accountchooser.util.Storage(k.accountchooser.util.browserconfig.SETTINGS_KEY_,k.accountchooser.util.browserconfig.COOKIE_NAME_);
k.accountchooser.util.browserconfig.getAll=function(){var b=k.accountchooser.util.browserconfig.storage_.read()||{};k.accountchooser.util.log(db+n[K](b));return b};k.accountchooser.util.browserconfig.setAll=function(b){k.accountchooser.util.log(Bb+n[K](b));k.accountchooser.util.browserconfig.storage_.write(b)};k.accountchooser.util.browserconfig.clearAll=function(){k.accountchooser.util.log(Pa);k.accountchooser.util.browserconfig.storage_.clear()};k.accountchooser.util.browserconfig.get=function(b){return k.accountchooser.util.browserconfig.getAll()[b]};
k.accountchooser.util.browserconfig.set=function(b,c){var d=k.accountchooser.util.browserconfig.getAll();d[b]=c;k.accountchooser.util.browserconfig.setAll(d)};k.accountchooser.util.browserconfig.clear=function(b){var c=k.accountchooser.util.browserconfig.getAll();delete c[b];k.accountchooser.util.browserconfig.setAll(c)};k.accountchooser.util.browserconfig.isDisabled=function(){return!!k.accountchooser.util.browserconfig.get(Wb)};
k.accountchooser.util.browserconfig.setDisabled=function(b){k.accountchooser.util.browserconfig.set(Wb,!!b)};k.accountchooser.loader=k.accountchooser.loader||{};k.accountchooser.loader.Loader=function(){};k.accountchooser.loader.Loader[Q].load=function(b,c,d,e){var f=this;this.load_(b,d,function(){c?f.load_(c,d,e):e()})};
k.accountchooser.loader.Loader[Q].load_=function(b,c,d){var e=m.getElementsByTagName(ac)[0]||m[x],f=this.createResourceElement(b),j=i;ba(f,da(f,function(){if(!j&&(!this[M]||this[M]===oc||this[M]===Ub))j=g,ba(f,da(f,h)),c&&c()}));f.onerror=function(){e.removeChild(f);d&&d()};e.insertBefore(f,e.firstChild)};k.accountchooser.loader.Loader[Q].createResourceElement=function(){throw"Unimplemented! Child object must provide an implementation.";};k.accountchooser.loader.JsLoader=function(){};k.accountchooser.loader.JsLoader.inheritsFrom(k.accountchooser.loader.Loader);
k.accountchooser.loader.JsLoader[Q].createResourceElement=function(b){var c=m[u](Hc);c[v](Vc,Sc);c[v](Mc,b);return c};k.accountchooser.loader.CssLoader=function(){};k.accountchooser.loader.CssLoader.inheritsFrom(k.accountchooser.loader.Loader);k.accountchooser.loader.CssLoader[Q].createResourceElement=function(b){var c=m[u](nc);c[v](Vc,Qc);c[v](Cc,Oc);c[v](dc,b);return c};
k.accountchooser.util.Semaphore=function(b,c){k.accountchooser[N].notEmptyFunction(b,$b);if(0>c)throw"Semaphore value cannot be negative.";this.handler_=b;this.value_=c||0;this.started_=i};Z=k.accountchooser.util.Semaphore[Q];Z.getValue=function(){return this.value_};Z.increase=function(){if(this.started_)throw"Cannot increase Semaphore value after calling start().";this.value_++};Z.start=function(){if(0>=this.value_)throw"Semaphore value must bigger than 0.";this.started_=g};Z.isStarted=function(){return this.started_};
Z.decrease=function(){if(!this.started_)throw"Cannot decrease Semaphore value before calling start().";0<this.value_&&(this.value_--,k.accountchooser.util.log(Ic+this.value_),0==this.value_&&this.handler_())};k.accountchooser.caja=k.accountchooser.caja||{};k.accountchooser.caja.loadHtml=function(b,c,d,e){o.ajax({type:cb,url:b,dataType:ec,success:d,timeout:c,error:function(b,c,d){e&&e(c,d)}})};k.accountchooser.caja.loadJs_=function(b,c,d){(new k.accountchooser.loader.JsLoader).load(b,a,c,d)};
k.accountchooser.caja.loadedUrls_={};k.accountchooser.caja.loadedCallback_=function(b){if(b&&(b=k.accountchooser.caja.loadedUrls_[b])){b.loaded=g;for(var c=0;c<b.callbacks[O];c++){var d=b.callbacks[c];d&&d()}b.callbacks=[];b.error=i;b.errorCallbacks=[]}};k.accountchooser.caja.errorCallback_=function(b,c,d){if(b&&(b=k.accountchooser.caja.loadedUrls_[b])){b.loaded=g;b.error=g;for(var e=0;e<b.errorCallbacks[O];e++){var f=b.errorCallbacks[e];f&&f(c,d)}b.errorCallbacks=[];b.callbacks=[]}};
k.accountchooser.caja.loadJs=function(b,c,d){k.accountchooser[N].notEmpty(b,lc);var e=k.accountchooser.caja.loadedUrls_[b];e?e.loaded?e.error?d&&d():c():(e.callbacks[I](c),d&&e.errorCallbacks[I](d)):(k.accountchooser.caja.loadedUrls_[b]={loaded:i,callbacks:[c]},k.accountchooser.caja.loadJs_(b,function(){k.accountchooser.caja.loadedCallback_(b)},function(){k.accountchooser.caja.errorCallback_(b)}))};k.accountchooser.caja=k.accountchooser.caja||{};k.accountchooser.caja.cajaUrl="https://ssl.gstatic.com/caja/4891/caja.js";
k.accountchooser.caja.htmlSanitizerUrl="https://ssl.gstatic.com/caja/4891/html-css-sanitizer-minified.js";k.accountchooser.caja.CAJA_TIMEOUT=5E3;k.accountchooser.caja.WHITELIST_IDS=["AC_LANGUAGE_LIST"];k.accountchooser.caja=k.accountchooser.caja||{};
k.accountchooser.caja.sanitizeHtml=function(b,c,d){function e(b){0>l-(new Date)[w]()?d(Tc):(b=html_sanitize(b,j,f),c(b))}function f(b){if(0<=o[C](b,k.accountchooser.caja.WHITELIST_IDS))return b}function j(b){return b}var l=(new Date)[w]()+k.accountchooser.caja.CAJA_TIMEOUT;k.accountchooser.caja.loadJs(k.accountchooser.caja.htmlSanitizerUrl,function(){var c=l-(new Date)[w]();50>c?d(Tc):k.accountchooser.caja.loadHtml(b,c,e,d)})};
k.accountchooser.caja.cajoleHtml=function(b,c,d,e){function f(){if(V)k.accountchooser.util.log(Eb);else{var b=ad-(new Date)[w]();50>b?k.accountchooser.util.log(Eb):k.accountchooser.caja.loadHtml(c,b,function(b){k[A](function(){V?k.accountchooser.util.log(Fb):b?(k.accountchooser.caja.cajaInitialized||(k.accountchooser.caja.cajaInitialized=g,caja.initialize({cajaServer:hc,forceES5Mode:g})),k[A](function(){V?k.accountchooser.util.log(Db):caja.load(l,j,function(c){c.code(a,Rc,b).run(function(){V||k.clearTimeout(bd);
Xa=g;d&&d();k.accountchooser.util.log(eb)})})},10)):k.accountchooser.util.log(qb)},10)})}}var j={rewrite:function(b){return b}},l=m.getElementById(b),V=i,Xa=i,bd=k[A](function(){k.accountchooser.util.log(Na);V=g;!Xa&&e&&e()},k.accountchooser.caja.CAJA_TIMEOUT),ad=(new Date)[w]()+k.accountchooser.caja.CAJA_TIMEOUT;k.accountchooser.caja.loadJs(k.accountchooser.caja.cajaUrl,function(){k[A](f,10)})};k.accountchooser.rpc=k.accountchooser.rpc||{};k.accountchooser.rpc.RpcObject=function(){};
k.accountchooser.rpc.RpcObject[Q].setTimestamp=function(b){this.timestamp_=b||(new Date)[w]()};ca(k.accountchooser.rpc.RpcObject[Q],function(){var b={jsonrpc:Fa};this.timestamp_&&(b.timestamp=this.timestamp_);return b});k.accountchooser.rpc.RpcObject[Q].toString=function(){return n[K](this[ga]())};k.accountchooser.rpc.AbstractRequest=function(b,c){this.method_=b;this.params_=c};k.accountchooser.rpc.AbstractRequest.inheritsFrom(k.accountchooser.rpc.RpcObject);Z=k.accountchooser.rpc.AbstractRequest[Q];
Z.setMethod=function(b){this.method_=b};Z.getMethod=function(){return this.method_};Z.setParameters=function(b){this.params_=b};Z.getParameters=function(){return this.params_};ca(Z,function(){var b=k.accountchooser.rpc.RpcObject[Q][ga][T](this);this.method_&&(b.method=this.method_);this.params_&&(b.params=this.params_);return b});k.accountchooser.rpc.Notification=function(b,c){this.method_=b;this.params_=c};k.accountchooser.rpc.Notification.inheritsFrom(k.accountchooser.rpc.AbstractRequest);
k.accountchooser.rpc.Request=function(b,c,d){this.method_=b;this.params_=c;this.id_=d};k.accountchooser.rpc[J].inheritsFrom(k.accountchooser.rpc.AbstractRequest);k.accountchooser.rpc[J][Q].setId=function(b){this.id_=b};k.accountchooser.rpc[J][Q].getId=function(){return this.id_};ca(k.accountchooser.rpc[J][Q],function(){var b=k.accountchooser.rpc.AbstractRequest[Q][ga][T](this);this.id_&&(b.id=this.id_);return b});
k.accountchooser.rpc.Response=function(b,c,d){k.accountchooser[N].notEmpty(b,Y);this.id_=b;this.result_=c;this.error_=d};k.accountchooser.rpc.Response.inheritsFrom(k.accountchooser.rpc.RpcObject);Z=k.accountchooser.rpc.Response[Q];Z.getResult=function(){return this.result_};Z.setResult=function(b){this.result_=b};Z.getError=function(){return this.error_};Z.setError=function(b){this.error_=b};Z.setId=function(b){this.id_=b};Z.getId=function(){return this.id_};
ca(Z,function(){var b=k.accountchooser.rpc.RpcObject[Q][ga][T](this);b.id=this.id_;this.result_?b.result=this.result_:this.error_&&(b.error=this.error_);return b});k.accountchooser.rpc.RequestAckNotification=function(b){k.accountchooser[N].notEmpty(b,Ec);this.method_=k.accountchooser.rpc.RequestAckNotification.METHOD;this.params_={requestId:b}};k.accountchooser.rpc.RequestAckNotification.inheritsFrom(k.accountchooser.rpc.Notification);k.accountchooser.rpc.RequestAckNotification.METHOD="requestAckNotification";
k.accountchooser.rpc.RequestAckNotification[Q].setRequestId=function(b){this.params_.requestId=b};k.accountchooser.rpc.RequestAckNotification[Q].getRequestId=function(){return this.params_.requestId};k.accountchooser.rpc.CdsReadyNotification=function(){this.method_=k.accountchooser.rpc.CdsReadyNotification.METHOD};k.accountchooser.rpc.CdsReadyNotification.inheritsFrom(k.accountchooser.rpc.Notification);k.accountchooser.rpc.CdsReadyNotification.METHOD="cdsReadyNotification";
k.accountchooser.rpc.ClientReadyNotification=function(){this.method_=k.accountchooser.rpc.ClientReadyNotification.METHOD};k.accountchooser.rpc.ClientReadyNotification.inheritsFrom(k.accountchooser.rpc.Notification);k.accountchooser.rpc.ClientReadyNotification.METHOD="clientReadyNotification";k.accountchooser.rpc.EmptyResponseNotification=function(){this.method_=k.accountchooser.rpc.EmptyResponseNotification.METHOD};k.accountchooser.rpc.EmptyResponseNotification.inheritsFrom(k.accountchooser.rpc.Notification);
k.accountchooser.rpc.EmptyResponseNotification.METHOD="emptyResponseNotification";k.accountchooser.rpc.StoreRequest=function(b,c,d,e){k.accountchooser[N].notEmpty(b,Y);k.accountchooser[N].notEmpty(c,Pb);this.method_=k.accountchooser.rpc.StoreRequest.METHOD;this.params_={account:c,localAccounts:d,clientConfig:e};this.id_=b};k.accountchooser.rpc.StoreRequest.inheritsFrom(k.accountchooser.rpc[J]);k.accountchooser.rpc.StoreRequest.METHOD="store";
k.accountchooser.rpc.SelectRequest=function(b,c,d){k.accountchooser[N].notEmpty(b,Y);this.method_=k.accountchooser.rpc.SelectRequest.METHOD;this.params_={localAccounts:c,clientConfig:d};this.id_=b};k.accountchooser.rpc.SelectRequest.inheritsFrom(k.accountchooser.rpc[J]);k.accountchooser.rpc.SelectRequest.METHOD="select";
k.accountchooser.rpc.UpdateRequest=function(b,c,d){k.accountchooser[N].notEmpty(b,Y);k.accountchooser[N].notEmpty(c,Pb);this.method_=k.accountchooser.rpc.UpdateRequest.METHOD;this.params_={account:c,clientConfig:d};this.id_=b};k.accountchooser.rpc.UpdateRequest.inheritsFrom(k.accountchooser.rpc[J]);k.accountchooser.rpc.UpdateRequest.METHOD="update";
k.accountchooser.rpc.ManageRequest=function(b,c){k.accountchooser[N].notEmpty(b,Y);this.method_=k.accountchooser.rpc.ManageRequest.METHOD;this.params_={clientConfig:c};this.id_=b};k.accountchooser.rpc.ManageRequest.inheritsFrom(k.accountchooser.rpc[J]);k.accountchooser.rpc.ManageRequest.METHOD=rc;
k.accountchooser.rpc.QueryRequest=function(b,c,d,e){k.accountchooser[N].notEmpty(b,Y);k.accountchooser[N].notEmpty(c,Bc);this.method_=k.accountchooser.rpc.QueryRequest.METHOD;this.params_={query:c,account:d,clientConfig:e};this.id_=b};k.accountchooser.rpc.QueryRequest.inheritsFrom(k.accountchooser.rpc[J]);k.accountchooser.rpc.QueryRequest.METHOD=Bc;k.accountchooser.rpc.Queries={CDS_DISABLED:"cdsDisabled",CDS_EMPTY:"cdsEmpty",ACCOUNT_EXIST:"accountExist"};
k.accountchooser.rpc.IdpReadyNotification=function(){this.method_=k.accountchooser.rpc.IdpReadyNotification.METHOD};k.accountchooser.rpc.IdpReadyNotification.inheritsFrom(k.accountchooser.rpc.Notification);k.accountchooser.rpc.IdpReadyNotification.METHOD="idpReadyNotification";
k.accountchooser.rpc.IdpAuthRequest=function(b,c){k.accountchooser[N].notEmpty(b,Pb);this.method_=k.accountchooser.rpc.IdpAuthRequest.METHOD;this.params_={account:b,clientConfig:c};this.id_=k.accountchooser.rpc.IdpAuthRequest.DEFAULT_ID+X+b.email};k.accountchooser.rpc.IdpAuthRequest.inheritsFrom(k.accountchooser.rpc[J]);k.accountchooser.rpc.IdpAuthRequest.METHOD="idpAuth";k.accountchooser.rpc.IdpAuthRequest.DEFAULT_ID="idpAuth";
k.accountchooser.rpc.parseRpcObject=function(b){var c=h;if(b){try{var d=n[ka](b)}catch(e){return k.accountchooser.util.log(kb),c}if(!d||d.jsonrpc!=Fa)k.accountchooser.util.log(lb);else if(d.method){var f=d.method[U]();f==k.accountchooser.rpc.StoreRequest.METHOD[U]()?d.id&&(d.params&&d.params.account)&&(c=new k.accountchooser.rpc.StoreRequest(d.id,d.params.account,d.params.localAccounts,d.params.clientConfig)):f==k.accountchooser.rpc.SelectRequest.METHOD[U]()?d.id&&(c=new k.accountchooser.rpc.SelectRequest(d.id,
d.params.localAccounts,d.params.clientConfig)):f==k.accountchooser.rpc.UpdateRequest.METHOD[U]()?d.id&&(d.params&&d.params.account)&&(c=new k.accountchooser.rpc.UpdateRequest(d.id,d.params.account,d.params.clientConfig)):f==k.accountchooser.rpc.ManageRequest.METHOD[U]()?d.id&&(c=new k.accountchooser.rpc.ManageRequest(d.id,d.params.clientConfig)):f==k.accountchooser.rpc.IdpReadyNotification.METHOD[U]()&&(c=new k.accountchooser.rpc.IdpReadyNotification)}else typeof d.id===Nc&&0<=d.id[L](k.accountchooser.rpc.IdpAuthRequest.DEFAULT_ID)&&
(c=new k.accountchooser.rpc.Response(d.id,d.result,d.error))}c?k.accountchooser.util.log(Cb+b):k.accountchooser.util.log(Ya+b);return c};k.accountchooser.rpc.DEFAULT_CDS_DOMAIN="https://www.accountchooser.com";k.accountchooser.rpc.DEFAULT_CDS_IFRAME_PATH="/iframe.html";k.accountchooser.rpc.DEFAULT_CDS_POPUP_PATH="/popup.html";k.accountchooser.rpc.DEFAULT_CDS_REDIRECT_PATH="/redirect.html";k.accountchooser.rpc.DEFAULT_POPUP_WIDTH=520;k.accountchooser.rpc.DEFAULT_POPUP_HEIGHT=550;
k.accountchooser.rpc.EMPTY_RESPONSE_CALLBACK="empty";k.accountchooser.rpc.IDP_TIMEOUT=3E3;k.accountchooser.rpc.RPC_TIMEOUT=3E5;k.accountchooser.rpc.services_={};k.accountchooser.rpc.register=function(b,c){k.accountchooser[N].notEmpty(b,Lc);k.accountchooser[N].notNull(c,$b);k.accountchooser.rpc.services_[b]=c};k.accountchooser.rpc.call=function(b,c,d){k.accountchooser[N].notEmpty(b,Pc);c=c[y]();k.accountchooser.util.log(Ab+c);b[ia](c,d||Ba)};
k.accountchooser.rpc.init_=function(b){k.addEventListener?k.addEventListener(sc,b,i):k[fa]?k[fa](vc,b):k[R][fa]?k[R][fa](vc,b):k.accountchooser.util.log(yb)};k.accountchooser.rpc.SAVED_IN_RPC_PREFIX_="IN_RPC_";k.accountchooser.rpc.SAVED_OUT_RPC_PREFIX_="OUT_RPC_";
k.accountchooser.rpc.readSavedRpcObjects=function(b,c){var d;d=c?k.accountchooser.rpc.SAVED_IN_RPC_PREFIX_:k.accountchooser.rpc.SAVED_OUT_RPC_PREFIX_;d+=b[r](/^https?:\/\//,W);var e=[],f=k[E].getItem(d);if(f){k[E][ha](d);var j=k.JSON[ka](f)||[],f=(new Date)[w]();if(j[O]){j=j[j[O]-1];try{var l=n[ka](j);l&&l.timestamp&&f-l.timestamp<k.accountchooser.rpc.RPC_TIMEOUT?(e[I](j),c&&k[E].setItem(d,k.JSON[K](e))):k.accountchooser.util.log(fb+j+Mb)}catch(V){k.accountchooser.util.log(gb+j+Mb)}}}return e};
k.accountchooser.rpc.saveRpcObject=function(b,c,d){b=b[r](/^https?:\/\//,W);k[E][ha](k.accountchooser.rpc.SAVED_IN_RPC_PREFIX_+b);k[E][ha](k.accountchooser.rpc.SAVED_OUT_RPC_PREFIX_+b);d=d?k.accountchooser.rpc.SAVED_IN_RPC_PREFIX_:k.accountchooser.rpc.SAVED_OUT_RPC_PREFIX_;d+=b;b=[];c.setTimestamp();b[I](c[y]());c=k.JSON[K](b);k[E].setItem(d,c)};k.accountchooser.rpc.idps={};k.accountchooser.rpc.idpsIndexedByDomain={};k.accountchooser.rpc.emailMapIdp={};
k.accountchooser.rpc.timer_={running:i,id:0,callback:h};k.accountchooser.rpc.clearTimeoutCallback_=function(){if(k.accountchooser.rpc.timer_.running){try{k.clearTimeout(k.accountchooser.rpc.timer_.id)}catch(b){}k.accountchooser.rpc.timer_.running=i;k.accountchooser.rpc.timer_.id=0;k.accountchooser.rpc.timer_.callback=h}};
k.accountchooser.rpc.setTimeoutCallback_=function(b){k.accountchooser[N].notEmptyFunction(b,Uc);k.accountchooser.rpc.clearTimeoutCallback_();k.accountchooser.rpc.timer_.callback=b;k.accountchooser.rpc.timer_.id=k[A](function(){k.accountchooser.rpc.timer_.callback&&k.accountchooser.rpc.timer_.callback[T](k);k.accountchooser.rpc.timer_.running=i;k.accountchooser.rpc.timer_.id=0;k.accountchooser.rpc.timer_.callback=h},k.accountchooser.rpc.IDP_TIMEOUT);k.accountchooser.rpc.timer_.running=g};
k.accountchooser.rpc.initIdpIFrame_=function(b){!b||!k.accountchooser.rpc.idps[b]?k.accountchooser.util.log(Ib+b+ya):k.accountchooser.rpc.idps[b].iframeUrl?k.accountchooser.rpc.initIdpIFrameByConfig_(k.accountchooser.rpc.idps[b]):k.accountchooser.util.log(Wa+b+za)};k.accountchooser.rpc.initIdpIFrameByConfig_=function(b){if(b&&!b.iframe){var c=o(Ha).css(zc,Ob).css(Xc,Ea).css(bc,Ea).css(mc,Ca).appendTo(Qb);b.iframe=c;c.attr(Mc,b.iframeUrl)}};
k.accountchooser.rpc.onIdpReady_=function(b){if(!b||!k.accountchooser.rpc.idpsIndexedByDomain[b])k.accountchooser.util.log(Jb+b+ya);else{var c=k.accountchooser.rpc.idpsIndexedByDomain[b];if(c.iframe){b=c.iframe[0].contentWindow;if(c[z]&&c[z][O]){for(var d=0;d<c[z][O];d++)k.accountchooser.rpc[T](b,c[z][d]);c.queue=[]}c.idpReady=g}else k.accountchooser.util.log(jb+b+wa)}};
k.accountchooser.rpc.callIdp=function(b,c,d,e){b&&k.accountchooser.rpc.idps[b]&&k.accountchooser.rpc.callIdpByConfig(k.accountchooser.rpc.idps[b],c,d,e)};k.accountchooser.rpc.callIdpByDomain=function(b,c,d,e){b&&k.accountchooser.rpc.idpsIndexedByDomain[b]&&k.accountchooser.rpc.callIdpByConfig(k.accountchooser.rpc.idpsIndexedByDomain[b],c,d,e)};
k.accountchooser.rpc.callIdpByConfig=function(b,c,d,e){k.accountchooser[N].notEmpty(b,ic);k.accountchooser[N].notEmpty(c,Dc);k.accountchooser[N].notEmptyFunction(d,Sb);k.accountchooser[N].notEmptyFunction(e,Tc);k.accountchooser.rpc.setTimeoutCallback_(e);k.accountchooser.rpc.addIdpCallback_(b,c,d);if(b.idpReady)k.accountchooser.rpc[T](b.iframe[0].contentWindow,c);else b[z]||(b.queue=[]),b[z][I](c),b.iframe||k.accountchooser.rpc.initIdpIFrameByConfig_(b)};
k.accountchooser.rpc.callIdpByConfig.callbacks_={};k.accountchooser.rpc.addIdpCallback_=function(b,c,d){k.accountchooser.rpc.callIdpByConfig.callbacks_[b.domain+X+c.id_]={callback:d,idpConfig:b}};k.accountchooser.rpc.getIdpCallback_=function(b,c){var d=b+X+c.id_,e=k.accountchooser.rpc.callIdpByConfig.callbacks_[d];if(e)return delete k.accountchooser.rpc.callIdpByConfig.callbacks_[d],e.callback};
k.accountchooser.rpc.isSupportedIdp=function(b){if(b&&(b=b.providerId||k.accountchooser.util.getEmailDomain(b.email)))if((b=k.accountchooser.rpc.emailMapIdp[b])&&k.accountchooser.rpc.idps[b])return b;return i};k.accountchooser.rpc.EMPTY_SAVED_RPC="EMPTY_SAVED_RPC";k.accountchooser.rpc.INVALID_CLIENT_DOMAIN="INVALID_CLIENT_DOMAIN";k.accountchooser.rpc.popupMode=i;k.accountchooser.rpc.clientWindow=h;
k.accountchooser.rpc.getDomainInHash_=function(){if(k[D].hash){var b=k[D].hash;b&&b[0]==sa&&(b=b.substring(1));return b}};k.accountchooser.rpc.triggerSavedRpcs_=function(){if(!k.accountchooser.rpc.popupMode){var b=k.accountchooser.rpc.readSavedRpcObjects(k.accountchooser.rpc.clientDomain_,g);if(b&&b[O])for(var c=0;c<b[O];c++)k.accountchooser.rpc.process_({data:b[c],origin:k.accountchooser.rpc.clientDomain_},g);else throw k.accountchooser.rpc.EMPTY_SAVED_RPC;}};
k.accountchooser.rpc.sendCdsReadyNotification_=function(){if(k.accountchooser.rpc.popupMode){var b=new k.accountchooser.rpc.CdsReadyNotification;k.accountchooser.rpc.clientWindow[ia](b[y](),Ba)}};
k.accountchooser.rpc.process_=function(b,c){k.accountchooser.util.log(xb+b[s]+na+b[p]);var d=b[p][r](/^https?:\/\//,W),e=k.accountchooser.rpc.parseRpcObject(b[s]);if(e)if(e instanceof k.accountchooser.rpc.ManageRequest&&!c)k.accountchooser.util.log(ib+b[s]);else if(e instanceof k.accountchooser.rpc.IdpReadyNotification)k.accountchooser.rpc.onIdpReady_(d);else if(e instanceof k.accountchooser.rpc.Response)k.accountchooser.rpc.clearTimeoutCallback_(),(d=k.accountchooser.rpc.getIdpCallback_(d,e))?d[T](k,
e,b[p],d.context):k.accountchooser.util.log(Ta+b[s]);else if(e instanceof k.accountchooser.rpc[J]){if(k.accountchooser.rpc.checkCallbackDomain_(e,d))if(d=k.accountchooser.rpc.services_.serviceLoader){if(e instanceof k.accountchooser.rpc[J]&&!c){var f=new k.accountchooser.rpc.RequestAckNotification(e.id_);k.parent[ia](f[y](),b[p])}d(e,b[p])}else k.accountchooser.util.log(pb+e.method_+va)}else k.accountchooser.util.log(Hb+b[s]);else k.accountchooser.util.log(Qa+b[s])};
k.accountchooser.rpc.checkCallbackDomain_=function(b,c){var d=b.params_.clientConfig.clientCallbackUrl&&k.accountchooser.util.getDomainFromUrl(b.params_.clientConfig.clientCallbackUrl);return d&&d!==c?(k.accountchooser.util.log(hb+b.params_.clientConfig.clientCallbackUrl+oa+c+pa),i):g};
k.accountchooser.rpc.initIdp_=function(b,c){var d=[];if(b)for(var e in b){k.accountchooser[N].notEmpty(b[e].iframeUrl,jc);var f=b[e].iframeUrl,j=k.accountchooser.util.getDomainFromUrl(f);k.accountchooser[N].notEmpty(j,Xb);f={id:e,domain:j,iframe:h,iframeUrl:f,queue:[],idpReady:i};k.accountchooser.rpc.idps[e]=f;k.accountchooser.rpc.idpsIndexedByDomain[j]=f;b[e].preload&&d[I](e)}if(c)for(var l in c)(e=c[l])?k.accountchooser.rpc.idps[e]?k.accountchooser.rpc.emailMapIdp[l]=e:k.accountchooser.util.log(mb+
l+qa):k.accountchooser.util.log(nb+l+ra);return d};
k.accountchooser.rpc.initCds=function(b){var c;if(b){if(b.rpcs)for(var d in b.rpcs)k.accountchooser.rpc.register(d,b.rpcs[d]);c=k.accountchooser.rpc.initIdp_(b.idps,b.emailMapIdp)}if(b&&b.popupMode)k.accountchooser.rpc.popupMode=g,k.accountchooser.rpc.clientWindow=k.opener;else{k.accountchooser.rpc.popupMode=i;d=k.accountchooser.rpc.getDomainInHash_();if(!d)throw k.accountchooser.util.log(Va),k.accountchooser.rpc.INVALID_CLIENT_DOMAIN;k.accountchooser.rpc.clientDomain_=d}k.accountchooser.rpc.init_(k.accountchooser.rpc.process_);
k.accountchooser.rpc.popupMode&&k.accountchooser.rpc.sendCdsReadyNotification_();if(c&&c[O])for(d=0;d<c[O];d++)k.accountchooser.rpc.initIdpIFrame_(c[d]);b&&!b.popupMode&&k.accountchooser.rpc.triggerSavedRpcs_()};
k.accountchooser.rpc.callClient=function(b){k.accountchooser[N].notEmpty(b,Fc);k.accountchooser.util.log(Ab+b[y]());k.accountchooser.rpc.popupMode?k.accountchooser.rpc.clientWindow[ia](b[y](),Ba):k.accountchooser.rpc.clientDomain_?k.accountchooser.rpc.saveRpcObject(k.accountchooser.rpc.clientDomain_,b,i):k.accountchooser.util.log(Oa)};k.accountchooser.UiLoader=function(){};Z=k.accountchooser.UiLoader[Q];Z.findServiceByLanguage_=function(b,c,d){return!b?h:d&&b[d]&&b[d][c]?b[d][c]:b[c]};
Z.findService_=function(b,c,d,e){var f=h;c&&(b=b.method_,d&&c.mobile&&(f=this.findServiceByLanguage_(c.mobile,b,e)),f||(f=this.findServiceByLanguage_(c.web,b,e)));return f};Z.loadServiceFromWeb=function(){throw Gb;};Z.isServiceLoaded=function(){throw Gb;};Z.setServiceLoaded=function(){throw Gb;};
Z.loadService=function(b,c,d){var e=k.accountchooser.util.isMobileAgent(aa.userAgent),f=b&&b.params_&&b.params_.clientConfig&&b.params_.clientConfig[P],b=this.findService_(b,c,e,f);k.accountchooser[N].notEmpty(b,Jc);k.accountchooser[N].notEmpty(b[ja],Kc);var j=o[ea]({},b,{mobile:!!e,language:f});if(this.isServiceLoaded(j))e=k.accountchooser.util.getNamespacedObjectByString(j[ja]),k.accountchooser[N].notEmpty(e,j[ja]),d(e);else{var l=this;this.loadServiceFromWeb(j,function(){l.setServiceLoaded(j);
var b=k.accountchooser.util.getNamespacedObjectByString(j[ja]);k.accountchooser[N].notEmpty(b,j[ja]);d(b)})}};k.accountchooser.UrlUiLoader=function(){this.loadedUrls_=[]};k.accountchooser.UrlUiLoader.inheritsFrom(k.accountchooser.UiLoader);k.accountchooser.UrlUiLoader[Q].getFileUrl=function(){throw Gb;};
k.accountchooser.UrlUiLoader[Q].loadServiceFromWeb=function(b,c){var d=m.getElementsByTagName(ac)[0]||m[x],e=m[u](Hc);e.src=this.getFileUrl(b);var f=i;ba(e,da(e,function(){if(!f&&(!this[M]||this[M]===oc||this[M]===Ub))f=g,ba(e,da(e,h)),c()}));d.insertBefore(e,d.firstChild)};k.accountchooser.UrlUiLoader[Q].isServiceLoaded=function(b){b=this.getFileUrl(b);return-1<o[C](b,this.loadedUrls_)};
k.accountchooser.UrlUiLoader[Q].setServiceLoaded=function(b){b=this.getFileUrl(b);0>o[C](b,this.loadedUrls_)&&this.loadedUrls_[I](b)};k.accountchooser.UrlTemplateUiLoader=function(b,c){this.loadedUrls_=[];this.urlTemplate_=b;this.defaultLanguage_=k.accountchooser.util.findLanguageCode(c)||Yb};k.accountchooser.UrlTemplateUiLoader.inheritsFrom(k.accountchooser.UrlUiLoader);
k.accountchooser.UrlTemplateUiLoader[Q].getFileUrl=function(b){var c=b[P]||k.navigator[P],c=k.accountchooser.util.findLanguageCode(c)||this.defaultLanguage_;return this.urlTemplate_[r](/\{baseFilename\}/,b.baseFilename)[r](/\{language\}/,c)};k.accountchooser.AjaxUiLoader=function(){this.loadedPackages_=[]};k.accountchooser.AjaxUiLoader.inheritsFrom(k.accountchooser.UiLoader);k.accountchooser.AjaxUiLoader[Q].stringify=function(b){return b.module+X+b.version+X+b.packageName+X+b[P]};
k.accountchooser.AjaxUiLoader[Q].loadServiceFromWeb=function(b,c){google.load(b.module,b.version,{packages:[b.packageName],language:b[P]||k.navigator[P],callback:c})};k.accountchooser.AjaxUiLoader[Q].isServiceLoaded=function(b){b=this[K](b);return-1<o[C](b,this.loadedPackages_)};k.accountchooser.AjaxUiLoader[Q].setServiceLoaded=function(b){b=this[K](b);0>o[C](b,this.loadedPackages_)&&this.loadedPackages_[I](b)};
var $c=o,cd={options:{popupMode:i,manageMode:i,Uiloader:new k.accountchooser.UrlTemplateUiLoader("javascript/{baseFilename}__{language}.js","javascript/{baseFilename}__en.js"),idps:{},emailMapIdp:{},uiHandler:h,enableCajole:i},loadService_:function(b){var c=this;this[F].Uiloader.loadService(b,this[F].services,function(d){c.executeService_(d,b)})},executeService_:function(b,c){var d=new b;d.setContainer(this.element);d.setCdsConfig(this.cdsConfig);d.executeRequest[T](d,c);c&&(c.params_&&c.params_.clientConfig&&
c.params_.clientConfig.ui)&&this.showCustomizedUI_(c)},showCustomizedUI_:function(b){b.params_.clientConfig.ui&&this.cdsConfig.uiHandler&&(b.params_.clientConfig.ui.language=b.params_.clientConfig[P]||Yb,!this.cdsConfig.enableCajole&&(b.params_.clientConfig.ui.main&&Rb==b.params_.clientConfig.ui.main.method)&&(b.params_.clientConfig.ui.main.method=Gc),this.cdsConfig.uiHandler(b.params_.clientConfig.ui))},_create:function(){$c(this.element).empty();this.cdsConfig={popupMode:this[F].popupMode,idps:this[F].idps,
emailMapIdp:this[F].emailMapIdp,uiHandler:this[F].uiHandler,enableCajole:!!this[F].enableCajole};this.cdsConfig.rpcs={serviceLoader:$c.proxy(this.loadService_,this)};try{k.accountchooser.rpc.initCds(this.cdsConfig)}catch(b){!this[F].manageMode&&(b==k.accountchooser.rpc.EMPTY_SAVED_RPC||b==k.accountchooser.rpc.INVALID_CLIENT_DOMAIN)&&this.redirectEmptyRequest()}this[F].manageMode&&this.showManagePage()},redirectEmptyRequest:function(){var b=k.accountchooser.rpc.getDomainInHash_();k[D].href=b&&k.accountchooser.util.isValidUrlDomain(b)?
fc+b:gc+k[D].host},showManagePage:function(){var b={language:k.accountchooser.util.parseUrlParams(k[D].href).lang,clientCallbackUrl:k[D].href},b={data:(new k.accountchooser.rpc.ManageRequest(rc,b))[y](),origin:k[D].host};k.accountchooser.rpc.process_(b,g)},destroy:function(){$c(this.element).empty();$c.Widget[Q].destroy[T](this)}};$c.widget("ui.cds",cd);})()
